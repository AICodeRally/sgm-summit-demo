module.exports=[18352,e=>{"use strict";function t(){let e=process.env.BINDING_MODE||"synthetic";return{providers:{policy:process.env.BINDING_MODE_POLICY||e,territory:process.env.BINDING_MODE_TERRITORY||e,approval:process.env.BINDING_MODE_APPROVAL||e,audit:process.env.BINDING_MODE_AUDIT||e,link:process.env.BINDING_MODE_LINK||e,search:process.env.BINDING_MODE_SEARCH||e,document:process.env.BINDING_MODE_DOCUMENT||e,committee:process.env.BINDING_MODE_COMMITTEE||e,planTemplate:process.env.BINDING_MODE_PLAN_TEMPLATE||e,plan:process.env.BINDING_MODE_PLAN||e,governanceFramework:process.env.BINDING_MODE_GOVERNANCE_FRAMEWORK||e},demoData:{enabled:"true"===process.env.ENABLE_DEMO_DATA},mapped:process.env.EXTERNAL_API_URL?{apiBaseUrl:process.env.EXTERNAL_API_URL,apiKey:process.env.EXTERNAL_API_KEY,timeout:parseInt(process.env.API_TIMEOUT||"5000")}:void 0,live:process.env.DATABASE_URL?{databaseUrl:process.env.DATABASE_URL,poolSize:parseInt(process.env.DB_POOL_SIZE||"10")}:void 0}}function i(){return"true"===process.env.ENABLE_DEMO_DATA}e.s(["isDemoDataEnabled",()=>i,"loadBindingConfig",()=>t])},97942,e=>{"use strict";var t=e.i(69719);let i=t.z.enum(["draft","published","superseded","retired"]),a=t.z.object({id:t.z.string().cuid(),tenantId:t.z.string(),name:t.z.string().min(1).max(200),description:t.z.string().max(2e3).optional(),category:t.z.string().optional(),version:t.z.string().regex(/^\d+\.\d+\.\d+$/,"Version must be semantic (e.g., 1.0.0)"),status:i,effectiveDate:t.z.coerce.date(),expirationDate:t.z.coerce.date().optional(),content:t.z.string(),parentPolicyId:t.z.string().optional(),supersededByPolicyId:t.z.string().optional(),approvalRequired:t.z.boolean().default(!0),approvalWorkflowId:t.z.string().optional(),approvedBy:t.z.string().optional(),approvedAt:t.z.coerce.date().optional(),createdBy:t.z.string(),createdAt:t.z.coerce.date(),updatedBy:t.z.string().optional(),updatedAt:t.z.coerce.date().optional(),metadata:t.z.record(t.z.string(),t.z.any()).optional()}),r=a.omit({id:!0,createdAt:!0,updatedAt:!0}),n=a.partial().required({id:!0,updatedBy:!0}),s=t.z.object({tenantId:t.z.string().optional(),status:i.optional(),category:t.z.string().optional(),effectiveBefore:t.z.coerce.date().optional(),effectiveAfter:t.z.coerce.date().optional(),createdBy:t.z.string().optional(),search:t.z.string().optional()}).partial();function o(e,t){let[i,a,r]=e.split(".").map(Number);switch(t){case"major":return`${i+1}.0.0`;case"minor":return`${i}.${a+1}.0`;case"patch":return`${i}.${a}.${r+1}`}}e.s(["CreatePolicySchema",0,r,"PolicyFiltersSchema",0,s,"UpdatePolicySchema",0,n,"nextVersion",()=>o])},11012,e=>{"use strict";let t="demo-tenant-001",i="System Admin",a=new Date("2026-01-07T12:00:00Z"),r=[{id:"tpl-comp-001-sec-01",templateId:"tpl-comp-001-id",parentSectionId:void 0,sectionKey:"executive-summary",title:"Executive Summary",description:"High-level overview of the compensation plan",orderIndex:0,level:0,isRequired:!0,isRepeatable:!1,contentTemplate:"# Executive Summary\n\nThis section provides a high-level overview of the {fiscal_year} compensation plan.",fieldDefinitions:[{fieldKey:"fiscal_year",label:"Fiscal Year",type:"TEXT",description:"The fiscal year this plan covers",placeholder:"2026",defaultValue:"2026",validationRules:[{type:"REQUIRED",message:"Fiscal year is required"}],orderIndex:0,isVisible:!0}],aiAgentRoles:["DESIGN","UIUX"],metadata:{}},{id:"tpl-comp-001-sec-02",templateId:"tpl-comp-001-id",parentSectionId:void 0,sectionKey:"objectives",title:"Plan Objectives",description:"Goals and objectives of the compensation plan",orderIndex:1,level:0,isRequired:!0,isRepeatable:!1,contentTemplate:"# Plan Objectives\n\n## Primary Objectives\n\n1. \n2. \n3. ",fieldDefinitions:[],aiAgentRoles:["POLICY_EXPERT","DESIGN"],metadata:{}},{id:"tpl-comp-001-sec-03",templateId:"tpl-comp-001-id",parentSectionId:void 0,sectionKey:"quota-structure",title:"Quota Structure",description:"Definition of quota allocation and targets",orderIndex:2,level:0,isRequired:!0,isRepeatable:!1,contentTemplate:"# Quota Structure\n\nAnnual quota per employee: ${annual_quota}\n\nTotal employees: {employee_count}\n\nRegion: {region}",fieldDefinitions:[{fieldKey:"annual_quota",label:"Annual Quota",type:"CURRENCY",description:"Annual quota per sales rep",placeholder:"500000",defaultValue:"500000",validationRules:[{type:"REQUIRED",message:"Annual quota is required"}],orderIndex:0,isVisible:!0},{fieldKey:"employee_count",label:"Employee Count",type:"NUMBER",description:"Number of employees covered by this plan",placeholder:"50",validationRules:[{type:"REQUIRED",message:"Employee count is required"}],orderIndex:1,isVisible:!0},{fieldKey:"region",label:"Region",type:"DROPDOWN",description:"Geographic region",options:[{value:"NORTH_AMERICA",label:"North America"},{value:"EMEA",label:"EMEA"},{value:"APAC",label:"APAC"},{value:"LATAM",label:"Latin America"}],orderIndex:2,isVisible:!0}],aiAgentRoles:["POLICY_EXPERT","DESIGN"],metadata:{}},{id:"tpl-comp-001-sec-04",templateId:"tpl-comp-001-id",parentSectionId:void 0,sectionKey:"commission-rates",title:"Commission Rates",description:"Commission rate structure and accelerators",orderIndex:3,level:0,isRequired:!0,isRepeatable:!1,contentTemplate:"# Commission Rates\n\nBase Rate: {base_rate}%\n\nAccelerator Threshold: {accelerator_threshold}%\n\nAccelerated Rate: {accelerated_rate}%",fieldDefinitions:[{fieldKey:"base_rate",label:"Base Commission Rate",type:"PERCENTAGE",description:"Base commission rate (0-100%)",placeholder:"10",defaultValue:"10",validationRules:[{type:"REQUIRED",message:"Base rate is required"},{type:"MIN",value:0,message:"Must be at least 0%"},{type:"MAX",value:100,message:"Cannot exceed 100%"}],orderIndex:0,isVisible:!0},{fieldKey:"accelerator_threshold",label:"Accelerator Threshold",type:"PERCENTAGE",description:"Quota attainment threshold for accelerated rate",placeholder:"100",defaultValue:"100",orderIndex:1,isVisible:!0},{fieldKey:"accelerated_rate",label:"Accelerated Rate",type:"PERCENTAGE",description:"Commission rate above threshold",placeholder:"15",defaultValue:"15",orderIndex:2,isVisible:!0}],aiAgentRoles:["POLICY_EXPERT","DESIGN"],metadata:{}},{id:"tpl-comp-001-sec-05",templateId:"tpl-comp-001-id",parentSectionId:void 0,sectionKey:"eligibility",title:"Eligibility Criteria",description:"Who is eligible for this compensation plan",orderIndex:4,level:0,isRequired:!0,isRepeatable:!1,contentTemplate:"# Eligibility Criteria\n\n## Eligible Roles\n\n## Requirements\n\n",fieldDefinitions:[],aiAgentRoles:["POLICY_EXPERT","UIUX"],metadata:{}},{id:"tpl-comp-002-sec-01",templateId:"tpl-comp-002-id",parentSectionId:void 0,sectionKey:"campaign-overview",title:"Campaign Overview",description:"Overview of the SPIF campaign",orderIndex:0,level:0,isRequired:!0,isRepeatable:!1,contentTemplate:"# {campaign_name}\n\n**Duration:** {start_date} to {end_date}\n\n**Incentive Amount:** ${spif_amount}",fieldDefinitions:[{fieldKey:"campaign_name",label:"Campaign Name",type:"TEXT",description:"Name of the SPIF campaign",placeholder:"Q1 Product Launch SPIF",validationRules:[{type:"REQUIRED",message:"Campaign name is required"}],orderIndex:0,isVisible:!0},{fieldKey:"start_date",label:"Start Date",type:"DATE",description:"Campaign start date",validationRules:[{type:"REQUIRED",message:"Start date is required"}],orderIndex:1,isVisible:!0},{fieldKey:"end_date",label:"End Date",type:"DATE",description:"Campaign end date",validationRules:[{type:"REQUIRED",message:"End date is required"}],orderIndex:2,isVisible:!0},{fieldKey:"spif_amount",label:"SPIF Amount",type:"CURRENCY",description:"Incentive payout amount",placeholder:"5000",validationRules:[{type:"REQUIRED",message:"SPIF amount is required"}],orderIndex:3,isVisible:!0}],aiAgentRoles:["DESIGN","UIUX"],metadata:{}},{id:"tpl-comp-002-sec-02",templateId:"tpl-comp-002-id",parentSectionId:void 0,sectionKey:"product-focus",title:"Product Focus",description:"Target products for this SPIF",orderIndex:1,level:0,isRequired:!0,isRepeatable:!1,contentTemplate:"# Product Focus\n\nTarget Products: {target_products}\n\n",fieldDefinitions:[{fieldKey:"target_products",label:"Target Products",type:"MULTI_SELECT",description:"Products eligible for SPIF",options:[{value:"PRODUCT_A",label:"Product A"},{value:"PRODUCT_B",label:"Product B"},{value:"PRODUCT_C",label:"Product C"}],validationRules:[{type:"REQUIRED",message:"At least one product must be selected"}],orderIndex:0,isVisible:!0}],aiAgentRoles:["POLICY_EXPERT"],metadata:{}},{id:"tpl-gov-001-sec-01",templateId:"tpl-gov-001-id",parentSectionId:void 0,sectionKey:"policy-summary",title:"Policy Summary",description:"Summary of the policy being rolled out",orderIndex:0,level:0,isRequired:!0,isRepeatable:!1,contentTemplate:"# Policy Summary\n\nPolicy Code: {policy_code}\n\nEffective Date: {effective_date}\n\nAffected Employees: {affected_employees}",fieldDefinitions:[{fieldKey:"policy_code",label:"Policy Code",type:"TEXT",description:"Code of the policy being implemented",placeholder:"POL-COMP-001",validationRules:[{type:"REQUIRED",message:"Policy code is required"}],orderIndex:0,isVisible:!0},{fieldKey:"effective_date",label:"Effective Date",type:"DATE",description:"When the policy takes effect",validationRules:[{type:"REQUIRED",message:"Effective date is required"}],orderIndex:1,isVisible:!0},{fieldKey:"affected_employees",label:"Affected Employees",type:"NUMBER",description:"Number of employees affected",placeholder:"200",orderIndex:2,isVisible:!0}],aiAgentRoles:["POLICY_EXPERT","DESIGN"],metadata:{}},{id:"tpl-gov-001-sec-02",templateId:"tpl-gov-001-id",parentSectionId:void 0,sectionKey:"communication-plan",title:"Communication Plan",description:"How the policy will be communicated to stakeholders",orderIndex:1,level:0,isRequired:!0,isRepeatable:!1,contentTemplate:"# Communication Plan\n\n## Stakeholders\n\n## Communication Channels\n\n## Timeline\n\n",fieldDefinitions:[],aiAgentRoles:["DESIGN","UIUX"],metadata:{}}];e.s(["syntheticPlanTemplates",0,[{id:"tpl-comp-001-id",tenantId:t,code:"TPL-COMP-001",name:"Annual Sales Compensation Plan",description:"Comprehensive template for annual sales compensation planning with quota structures, commission rates, and payment schedules",planType:"COMPENSATION_PLAN",category:"Sales Compensation",tags:["sales","annual","quota","commission"],version:"1.0.0",status:"ACTIVE",source:"SYSTEM",isSystemTemplate:!0,clonedFromId:void 0,owner:i,createdBy:i,createdAt:a,lastUpdated:a,effectiveDate:a,usageCount:0,metadata:{}},{id:"tpl-comp-002-id",tenantId:t,code:"TPL-COMP-002",name:"SPIF Campaign Template",description:"Short-term Sales Performance Incentive Fund (SPIF) campaign template",planType:"COMPENSATION_PLAN",category:"SPIF",tags:["spif","campaign","short-term","incentive"],version:"1.0.0",status:"ACTIVE",source:"SYSTEM",isSystemTemplate:!0,clonedFromId:void 0,owner:i,createdBy:i,createdAt:a,lastUpdated:a,effectiveDate:a,usageCount:0,metadata:{}},{id:"tpl-gov-001-id",tenantId:t,code:"TPL-GOV-001",name:"Policy Rollout Implementation Plan",description:"Template for planning and executing policy rollouts across the organization",planType:"GOVERNANCE_PLAN",category:"Policy Implementation",tags:["governance","policy","rollout","implementation"],version:"1.0.0",status:"ACTIVE",source:"SYSTEM",isSystemTemplate:!0,clonedFromId:void 0,owner:i,createdBy:i,createdAt:a,lastUpdated:a,effectiveDate:a,usageCount:0,metadata:{}}],"syntheticTemplateSections",0,r])},99187,e=>{"use strict";let t="demo-tenant-001",i="Demo User",a=new Date("2026-01-07T12:00:00Z"),r={id:"plan-001-id",tenantId:t,planCode:"PLAN-NA-2026-001",title:"2026 North America Sales Compensation Plan",description:"Annual sales compensation plan for North America region",planType:"COMPENSATION_PLAN",category:"Sales Compensation",tags:["sales","north-america","2026","annual"],version:"1.0.0",status:"IN_PROGRESS",createdFromTemplateId:"tpl-comp-001-id",templateSnapshot:{},owner:"Sales Operations Manager",createdBy:i,updatedBy:i,approvalWorkflowId:void 0,createdAt:new Date("2026-01-05T09:00:00Z"),lastUpdated:a,effectiveDate:new Date("2026-01-01T00:00:00Z"),expirationDate:new Date("2026-12-31T23:59:59Z"),publishedAt:void 0,documentId:void 0,supersedes:void 0,supersededBy:void 0,completionPercentage:40,sectionsCompleted:2,sectionsTotal:5,metadata:{}},n=[{id:"plan-001-sec-01",planId:"plan-001-id",parentSectionId:void 0,sectionKey:"executive-summary",title:"Executive Summary",description:"High-level overview of the compensation plan",orderIndex:0,level:0,isRequired:!0,content:"# Executive Summary\n\nThis section provides a high-level overview of the 2026 compensation plan for the North America sales team.",fieldValues:[{fieldKey:"fiscal_year",value:"2026",lastUpdated:a,updatedBy:i}],aiAgentRoles:["DESIGN","UIUX"],completionStatus:"COMPLETED",completionPercentage:100,reviewedBy:void 0,reviewedAt:void 0,reviewComments:void 0,createdAt:new Date("2026-01-05T09:00:00Z"),lastUpdated:a,metadata:{}},{id:"plan-001-sec-02",planId:"plan-001-id",parentSectionId:void 0,sectionKey:"objectives",title:"Plan Objectives",description:"Goals and objectives of the compensation plan",orderIndex:1,level:0,isRequired:!0,content:"# Plan Objectives\n\n## Primary Objectives\n\n1. Drive 20% revenue growth in North America\n2. Increase new customer acquisition by 30%\n3. Improve sales team retention to 95%",fieldValues:[],aiAgentRoles:["POLICY_EXPERT","DESIGN"],completionStatus:"COMPLETED",completionPercentage:100,reviewedBy:void 0,reviewedAt:void 0,reviewComments:void 0,createdAt:new Date("2026-01-05T09:30:00Z"),lastUpdated:a,metadata:{}},{id:"plan-001-sec-03",planId:"plan-001-id",parentSectionId:void 0,sectionKey:"quota-structure",title:"Quota Structure",description:"Definition of quota allocation and targets",orderIndex:2,level:0,isRequired:!0,content:"# Quota Structure\n\nAnnual quota per employee: $750,000\n\nTotal employees: 85\n\nRegion: North America",fieldValues:[{fieldKey:"annual_quota",value:"750000",lastUpdated:a,updatedBy:i},{fieldKey:"employee_count",value:85,lastUpdated:a,updatedBy:i},{fieldKey:"region",value:"NORTH_AMERICA",lastUpdated:a,updatedBy:i}],aiAgentRoles:["POLICY_EXPERT","DESIGN"],completionStatus:"IN_PROGRESS",completionPercentage:75,reviewedBy:void 0,reviewedAt:void 0,reviewComments:void 0,createdAt:new Date("2026-01-05T10:00:00Z"),lastUpdated:a,metadata:{}},{id:"plan-001-sec-04",planId:"plan-001-id",parentSectionId:void 0,sectionKey:"commission-rates",title:"Commission Rates",description:"Commission rate structure and accelerators",orderIndex:3,level:0,isRequired:!0,content:"",fieldValues:[],aiAgentRoles:["POLICY_EXPERT","DESIGN"],completionStatus:"NOT_STARTED",completionPercentage:0,reviewedBy:void 0,reviewedAt:void 0,reviewComments:void 0,createdAt:new Date("2026-01-05T10:30:00Z"),lastUpdated:new Date("2026-01-05T10:30:00Z"),metadata:{}},{id:"plan-001-sec-05",planId:"plan-001-id",parentSectionId:void 0,sectionKey:"eligibility",title:"Eligibility Criteria",description:"Who is eligible for this compensation plan",orderIndex:4,level:0,isRequired:!0,content:"",fieldValues:[],aiAgentRoles:["POLICY_EXPERT","UIUX"],completionStatus:"NOT_STARTED",completionPercentage:0,reviewedBy:void 0,reviewedAt:void 0,reviewComments:void 0,createdAt:new Date("2026-01-05T10:30:00Z"),lastUpdated:new Date("2026-01-05T10:30:00Z"),metadata:{}}],s={id:"plan-002-id",tenantId:t,planCode:"PLAN-SPIF-Q1-2026",title:"Q1 2026 Product Launch SPIF",description:"Special incentive for Q1 product launch campaign",planType:"COMPENSATION_PLAN",category:"SPIF",tags:["spif","q1-2026","product-launch"],version:"1.0.0",status:"DRAFT",createdFromTemplateId:"tpl-comp-002-id",templateSnapshot:{},owner:"Marketing Director",createdBy:i,updatedBy:void 0,approvalWorkflowId:void 0,createdAt:new Date("2026-01-06T14:00:00Z"),lastUpdated:new Date("2026-01-06T14:00:00Z"),effectiveDate:new Date("2026-01-15T00:00:00Z"),expirationDate:new Date("2026-03-31T23:59:59Z"),publishedAt:void 0,documentId:void 0,supersedes:void 0,supersededBy:void 0,completionPercentage:10,sectionsCompleted:0,sectionsTotal:2,metadata:{}},o=[...n,{id:"plan-002-sec-01",planId:"plan-002-id",parentSectionId:void 0,sectionKey:"campaign-overview",title:"Campaign Overview",description:"Overview of the SPIF campaign",orderIndex:0,level:0,isRequired:!0,content:"",fieldValues:[],aiAgentRoles:["DESIGN","UIUX"],completionStatus:"NOT_STARTED",completionPercentage:0,reviewedBy:void 0,reviewedAt:void 0,reviewComments:void 0,createdAt:new Date("2026-01-06T14:00:00Z"),lastUpdated:new Date("2026-01-06T14:00:00Z"),metadata:{}},{id:"plan-002-sec-02",planId:"plan-002-id",parentSectionId:void 0,sectionKey:"product-focus",title:"Product Focus",description:"Target products for this SPIF",orderIndex:1,level:0,isRequired:!0,content:"",fieldValues:[],aiAgentRoles:["POLICY_EXPERT"],completionStatus:"NOT_STARTED",completionPercentage:0,reviewedBy:void 0,reviewedAt:void 0,reviewComments:void 0,createdAt:new Date("2026-01-06T14:00:00Z"),lastUpdated:new Date("2026-01-06T14:00:00Z"),metadata:{}}];e.s(["syntheticPlanSections",0,o,"syntheticPlans",0,[r,s]])},77880,e=>{"use strict";let t="demo-tenant-001",i="BHG Consulting",a=new Date("2026-01-07T12:00:00Z"),r={id:"fw-001-id",tenantId:t,code:"SPM-FW-001",title:"SPARCC Core Methodology",category:"METHODOLOGY",content:`# SPARCC Core Methodology

## Overview

SPARCC (Sales Performance, Alignment, Recognition, Compensation & Communication) is the foundational framework for designing and implementing compensation plans.

## Key Principles

### 1. Strategic Alignment
- Compensation plans must align with business objectives
- Link pay to performance metrics that drive revenue growth
- Ensure quota allocation reflects territory potential

### 2. Performance Measurement
- Define clear, measurable performance indicators
- Establish baseline performance levels
- Set realistic but challenging targets

### 3. Recognition & Rewards
- Timely recognition of achievement
- Competitive compensation packages
- Non-monetary recognition programs

### 4. Compensation Structure
- Base salary + variable compensation
- Commission rates tied to quota attainment
- Accelerators for exceeding targets
- Caps and thresholds clearly defined

### 5. Communication
- Transparent plan documentation
- Regular updates on performance
- Clear dispute resolution process

## Compliance Requirements

All compensation plans must:
- Include clear eligibility criteria
- Define payment schedules and timing
- Specify proration rules for mid-period hires
- Document exception handling procedures
- Establish governance oversight (SGCC/CRB approval)

## Governance Framework

- **Approval Authority**: SGCC for standard plans, CRB for exceptions
- **Review Cycle**: Annual review required
- **Amendment Process**: Requires executive approval for mid-year changes
- **Audit Requirements**: Quarterly compliance audits

---

**Version**: 1.0.0
**Last Updated**: January 2026
**Owner**: BHG Consulting
`,version:"1.0.0",status:"ACTIVE",isGlobal:!0,isMandatory:!0,applicableTo:["COMPENSATION_PLAN","GOVERNANCE_PLAN"],createdBy:i,createdAt:a,updatedAt:a},n={id:"fw-002-id",tenantId:t,code:"SPM-FW-002",title:"Compensation Governance Best Practices",category:"BEST_PRACTICES",content:`# Compensation Governance Best Practices

## Design Principles

### Simplicity
- Plans should be easy to understand
- Avoid overly complex calculation formulas
- Limit number of plan components

### Fairness
- Equitable treatment across similar roles
- Transparent criteria for exceptions
- Consistent application of rules

### Competitiveness
- Benchmark against industry standards
- Regular market analysis (annually minimum)
- Competitive pay ranges by role/level

## Plan Components

### Required Elements
1. **Executive Summary** - High-level overview
2. **Eligibility Criteria** - Who qualifies
3. **Performance Metrics** - What gets measured
4. **Payout Calculation** - How compensation is determined
5. **Payment Schedule** - When payouts occur
6. **Dispute Resolution** - How conflicts are resolved

### Recommended Elements
- Plan objectives and goals
- Examples and scenarios
- Frequently asked questions
- Glossary of terms

## Governance Checkpoints

### Pre-Launch
- [ ] Legal review completed
- [ ] Finance approval obtained
- [ ] SGCC/CRB approval secured
- [ ] Communication plan in place
- [ ] Training materials prepared

### Post-Launch
- [ ] Monthly performance tracking
- [ ] Quarterly compliance audits
- [ ] Annual effectiveness review
- [ ] Continuous improvement process

## Risk Mitigation

### Common Pitfalls to Avoid
- Unclear eligibility rules
- Ambiguous performance definitions
- Missing proration rules
- Lack of governance oversight
- Inadequate communication

### Control Measures
- Mandatory peer review before approval
- Version control for all plan documents
- Audit trail for all amendments
- Exception tracking and reporting

---

**Version**: 1.0.0
**Last Updated**: January 2026
**Owner**: BHG Consulting
`,version:"1.0.0",status:"ACTIVE",isGlobal:!0,isMandatory:!1,applicableTo:["COMPENSATION_PLAN"],createdBy:i,createdAt:a,updatedAt:a},s={id:"fw-003-id",tenantId:t,code:"SPM-FW-003",title:"Policy Writing Standards",category:"STANDARDS",content:`# Policy Writing Standards

## Document Structure

All policy documents must follow this structure:

### 1. Header
- Policy Code (e.g., POL-COMP-001)
- Title
- Version Number
- Effective Date
- Owner/Sponsor
- Approval Authority

### 2. Purpose Statement
- Why this policy exists
- What problem it solves
- Scope of applicability

### 3. Policy Statement
- Clear, declarative statements
- Use "must" for requirements, "should" for recommendations
- Active voice preferred

### 4. Definitions
- Glossary of key terms
- Acronyms spelled out
- Context-specific meanings

### 5. Procedures
- Step-by-step instructions
- Process flows where applicable
- Decision trees for complex scenarios

### 6. Roles & Responsibilities
- Who does what
- Approval authorities
- Escalation paths

### 7. Compliance & Enforcement
- Monitoring mechanisms
- Audit requirements
- Consequences of non-compliance

### 8. Exceptions
- Exception request process
- Approval authorities for exceptions
- Documentation requirements

### 9. References
- Related policies
- Legal/regulatory citations
- Supporting documentation

### 10. Revision History
- Version tracking
- Change log
- Effective dates

## Writing Style Guidelines

### Clarity
- Short sentences (15-20 words max)
- Simple language (8th-grade reading level)
- Avoid jargon and acronyms where possible

### Consistency
- Use standard terminology throughout
- Maintain consistent formatting
- Follow corporate style guide

### Accessibility
- WCAG 2.1 compliance for digital documents
- Alternative text for images/charts
- Proper heading hierarchy

## Review & Approval Process

1. **Draft Review** - Subject matter expert review
2. **Legal Review** - Compliance and risk assessment
3. **Stakeholder Review** - Affected parties provide input
4. **Executive Approval** - Final sign-off
5. **Publication** - Make available to intended audience

---

**Version**: 1.0.0
**Last Updated**: January 2026
**Owner**: BHG Consulting
`,version:"1.0.0",status:"ACTIVE",isGlobal:!0,isMandatory:!1,applicableTo:["POLICY_CREATION_PLAN"],createdBy:i,createdAt:a,updatedAt:a};e.s(["syntheticGovernanceFrameworks",0,[r,n,s]])},26076,19892,31270,26977,96798,e=>{"use strict";let t="demo-tenant-001",i=new Date,a=new Date(i.getTime()-2592e6),r=new Date(i.getTime()+2592e6),n=[{id:"pol-001",tenantId:t,name:"Standard Commission Rate Policy",description:"Defines standard commission rates for various product lines and deal sizes.",category:"compensation",version:"2.1.0",status:"published",effectiveDate:a,content:`# Standard Commission Rate Policy

## Overview
This policy defines commission rates for sales representatives across all product lines.

## Rates
- Software: 8%
- Services: 12%
- Hardware: 5%

## Thresholds
- Deals < $50K: Standard rate
- Deals $50K-$250K: +1% bonus
- Deals > $250K: +2% bonus`,approvalRequired:!0,approvedBy:"user-exec-001",approvedAt:new Date(a.getTime()+1728e5),createdBy:"user-ops-001",createdAt:new Date(a.getTime()-432e6),updatedBy:"user-ops-001",updatedAt:a,metadata:{owner:"Sales Operations",reviewDate:r.toISOString()}},{id:"pol-002",tenantId:t,name:"Split Credit Policy",description:"Rules for splitting commission credit between multiple sales reps.",category:"compensation",version:"1.3.0",status:"published",effectiveDate:a,content:`# Split Credit Policy

## Scenarios
### Territory Transfer
- Rep leaving: 50% for deals in progress
- Rep joining: 50% for closed deals

### Team Selling
- Primary rep: 60%
- Supporting rep: 40%

### Overlay Specialists
- Account Executive: 70%
- Solutions Architect: 30%`,approvalRequired:!0,approvedBy:"user-exec-001",approvedAt:a,createdBy:"user-ops-002",createdAt:new Date(a.getTime()-864e6),metadata:{owner:"Sales Operations"}},{id:"pol-003",tenantId:t,name:"Quota Adjustment Policy",description:"Procedures for adjusting sales quotas mid-quarter.",category:"quota",version:"1.0.0",status:"published",effectiveDate:new Date(i.getTime()-5184e6),content:`# Quota Adjustment Policy

## Approval Requirements
- <10% adjustment: Sales Manager approval
- 10-25% adjustment: Sales VP approval
- >25% adjustment: Executive approval

## Valid Reasons
- Territory realignment
- Market conditions
- Workforce changes
- Product availability`,approvalRequired:!0,approvedBy:"user-exec-001",approvedAt:new Date(i.getTime()-50112e5),createdBy:"user-ops-001",createdAt:new Date(i.getTime()-5616e6),metadata:{owner:"Sales Operations"}},{id:"pol-004",tenantId:t,name:"Territory Overlap Resolution Policy",description:"Guidelines for resolving territory overlap conflicts.",category:"territory",version:"0.9.0",status:"draft",effectiveDate:r,content:`# Territory Overlap Resolution Policy

## Draft - For Review

## Overlap Scenarios
1. Geographic overlap
2. Account overlap
3. Industry vertical overlap

## Resolution Process
1. Identify overlap
2. Manager review
3. Rep negotiation
4. Executive decision (if needed)`,approvalRequired:!0,createdBy:"user-ops-002",createdAt:new Date(i.getTime()-432e6),updatedBy:"user-ops-002",updatedAt:new Date(i.getTime()-1728e5),metadata:{owner:"Sales Operations",reviewers:["user-mgr-001","user-mgr-002"]}},{id:"pol-005",tenantId:t,name:"Quota Accelerator Policy",description:"Bonus accelerators for exceeding quota targets.",category:"compensation",version:"1.2.0",status:"published",effectiveDate:new Date(i.getTime()-7776e6),content:`# Quota Accelerator Policy

## Tiers
- 100-110% attainment: 1.2x multiplier
- 110-125% attainment: 1.5x multiplier
- 125-150% attainment: 2.0x multiplier
- >150% attainment: 2.5x multiplier

## Eligibility
- Must be in role for full quarter
- Must have no compliance violations`,approvalRequired:!0,approvedBy:"user-exec-001",approvedAt:new Date(i.getTime()-76032e5),createdBy:"user-ops-001",createdAt:new Date(i.getTime()-8208e6),metadata:{owner:"Sales Operations"}},{id:"pol-006",tenantId:t,name:"Standard Commission Rate Policy",description:"Previous version of commission rate policy.",category:"compensation",version:"2.0.0",status:"superseded",effectiveDate:new Date(i.getTime()-10368e6),expirationDate:a,supersededByPolicyId:"pol-001",content:`# Standard Commission Rate Policy (v2.0.0)

## Previous Rates
- Software: 7%
- Services: 10%
- Hardware: 5%`,approvalRequired:!0,approvedBy:"user-exec-001",approvedAt:new Date(i.getTime()-101952e5),createdBy:"user-ops-001",createdAt:new Date(i.getTime()-108e8),metadata:{owner:"Sales Operations",supersededBy:"pol-001"}},{id:"pol-007",tenantId:t,name:"Deal Registration Policy",description:"Requirements and procedures for registering sales opportunities.",category:"process",version:"1.1.0",status:"published",effectiveDate:new Date(i.getTime()-3888e6),content:`# Deal Registration Policy

## Registration Requirements
- Deal must be registered within 3 days of first contact
- Minimum deal size: $10,000
- Required fields: Account, Contact, Products, Value

## Protection Period
- Enterprise deals: 90 days
- SMB deals: 60 days
- Inside sales: 30 days`,approvalRequired:!0,approvedBy:"user-exec-001",approvedAt:new Date(i.getTime()-37152e5),createdBy:"user-ops-002",createdAt:new Date(i.getTime()-432e7),metadata:{owner:"Sales Operations"}},{id:"pol-008",tenantId:t,name:"Commission Clawback Policy",description:"Rules for reclaiming commissions on cancelled deals.",category:"compensation",version:"1.0.0",status:"published",effectiveDate:new Date(i.getTime()-15552e6),content:`# Commission Clawback Policy

## Clawback Scenarios
- Deal cancelled within 90 days: 100% clawback
- Deal cancelled within 90-180 days: 50% clawback
- Deal cancelled after 180 days: No clawback

## Process
- Finance notifies Sales Ops
- Rep notified within 5 days
- Deduction from next commission check`,approvalRequired:!0,approvedBy:"user-exec-001",approvedAt:new Date(i.getTime()-153792e5),createdBy:"user-ops-001",createdAt:new Date(i.getTime()-15984e6),metadata:{owner:"Sales Operations",reviewedBy:"Legal"}},{id:"pol-009",tenantId:t,name:"New Hire Quota Ramp Policy",description:"Quota ramp schedule for new sales representatives.",category:"quota",version:"0.5.0",status:"draft",effectiveDate:r,content:`# New Hire Quota Ramp Policy

## Draft

## Ramp Schedule
- Month 1: 25% of full quota
- Month 2: 50% of full quota
- Month 3: 75% of full quota
- Month 4+: 100% of full quota

## Commission During Ramp
- Standard rates apply to ramp quota
- Accelerators apply after Month 4`,approvalRequired:!0,createdBy:"user-ops-002",createdAt:new Date(i.getTime()-6048e5),metadata:{owner:"Sales Operations",status:"In Review"}},{id:"pol-010",tenantId:t,name:"Special Incentive (SPIFF) Policy",description:"Guidelines for special short-term sales incentives.",category:"compensation",version:"1.0.0",status:"published",effectiveDate:new Date(i.getTime()-2592e6),content:`# SPIFF Policy

## Approval Requirements
- VP Sales approval for SPIFFs < $10K total
- Executive approval for SPIFFs > $10K

## Rules
- Maximum duration: 30 days
- Clear eligibility criteria
- Documented payout terms
- No conflicts with base comp

## Examples
- New product launch incentives
- End-of-quarter push
- Competitive win bonuses`,approvalRequired:!0,approvedBy:"user-exec-001",approvedAt:new Date(i.getTime()-24192e5),createdBy:"user-ops-001",createdAt:new Date(i.getTime()-3024e6),metadata:{owner:"Sales Operations"}}];e.s(["syntheticPolicies",0,n],19892);let s="demo-tenant-001",o=new Date,d=new Date(o.getTime()-7776e6),l=[{id:"terr-001",tenantId:s,code:"AMER",name:"Americas",type:"geographic",status:"active",level:0,path:"/1",assignedToUserId:"user-vp-001",assignedAt:d,coverageRules:{countries:["US","CA","MX","BR"]},effectiveDate:d,createdBy:"user-admin-001",createdAt:d},{id:"terr-002",tenantId:s,code:"US",name:"United States",type:"geographic",status:"active",parentTerritoryId:"terr-001",level:1,path:"/1/2",coverageRules:{countries:["US"]},effectiveDate:d,createdBy:"user-admin-001",createdAt:d},{id:"terr-003",tenantId:s,code:"US-WEST",name:"US West",type:"geographic",status:"active",parentTerritoryId:"terr-002",level:2,path:"/1/2/3",assignedToUserId:"user-rep-001",assignedAt:d,coverageRules:{countries:["US"],states:["CA","OR","WA","NV","AZ"]},effectiveDate:d,createdBy:"user-admin-001",createdAt:d},{id:"terr-004",tenantId:s,code:"US-EAST",name:"US East",type:"geographic",status:"active",parentTerritoryId:"terr-002",level:2,path:"/1/2/4",assignedToUserId:"user-rep-002",assignedAt:d,coverageRules:{countries:["US"],states:["NY","MA","PA","NJ","VA","NC","FL"]},effectiveDate:d,createdBy:"user-admin-001",createdAt:d},{id:"terr-005",tenantId:s,code:"US-CENTRAL",name:"US Central",type:"geographic",status:"active",parentTerritoryId:"terr-002",level:2,path:"/1/2/5",assignedToUserId:"user-rep-003",assignedAt:d,coverageRules:{countries:["US"],states:["TX","IL","OH","MI","CO"]},effectiveDate:d,createdBy:"user-admin-001",createdAt:d},{id:"terr-006",tenantId:s,code:"ENT-TECH",name:"Enterprise Technology Accounts",type:"named",status:"active",level:0,path:"/6",assignedToUserId:"user-rep-004",assignedAt:d,coverageRules:{accountIds:["acc-001","acc-002","acc-003"],industryVerticals:["Technology"],revenueMin:1e9},effectiveDate:d,createdBy:"user-admin-001",createdAt:d,metadata:{accountCount:3,namedAccounts:!0}},{id:"terr-007",tenantId:s,code:"IND-HEALTH",name:"Healthcare Vertical",type:"industry",status:"active",level:0,path:"/7",assignedToUserId:"user-rep-005",assignedAt:d,coverageRules:{industryVerticals:["Healthcare","Pharmaceuticals"],revenueMin:5e7},effectiveDate:d,createdBy:"user-admin-001",createdAt:d,metadata:{specialization:"Healthcare vertical specialist"}},{id:"terr-008",tenantId:s,code:"IND-FINSERV",name:"Financial Services Vertical",type:"industry",status:"active",level:0,path:"/8",assignedToUserId:"user-rep-006",assignedAt:d,coverageRules:{industryVerticals:["Financial Services","Banking","Insurance"],revenueMin:1e8},effectiveDate:d,createdBy:"user-admin-001",createdAt:d},{id:"terr-009",tenantId:s,code:"SMB-US",name:"SMB United States",type:"account",status:"active",level:0,path:"/9",assignedToUserId:"user-rep-007",assignedAt:d,coverageRules:{countries:["US"],revenueMin:1e6,revenueMax:5e7,employeeCountMin:10,employeeCountMax:500},effectiveDate:d,createdBy:"user-admin-001",createdAt:d,metadata:{segment:"SMB"}},{id:"terr-010",tenantId:s,code:"US-SOUTH-OLD",name:"US South (Old)",type:"geographic",status:"inactive",parentTerritoryId:"terr-002",level:2,path:"/1/2/10",coverageRules:{countries:["US"],states:["GA","AL","TN","LA"]},effectiveDate:new Date(o.getTime()-15552e6),expirationDate:new Date(o.getTime()-2592e6),createdBy:"user-admin-001",createdAt:new Date(o.getTime()-15552e6),updatedBy:"user-admin-001",updatedAt:new Date(o.getTime()-2592e6),metadata:{replacedBy:"terr-005"}}];e.s(["syntheticTerritories",0,l],31270);let c="demo-tenant-001",p=new Date,u=[{id:"appr-001",tenantId:c,title:"Publish Territory Overlap Resolution Policy",description:"Request to publish new policy from draft",priority:"high",status:"pending",entityType:"policy",entityId:"pol-004",requestType:"publish",requestData:{policyId:"pol-004",version:"0.9.0",targetVersion:"1.0.0"},workflowId:"wf-001",currentStep:0,totalSteps:2,submittedBy:"user-ops-002",submittedAt:new Date(p.getTime()-1728e5),slaDeadline:new Date(p.getTime()+2592e5),createdAt:new Date(p.getTime()-1728e5),metadata:{reviewers:["user-mgr-001","user-exec-001"]}},{id:"appr-002",tenantId:c,title:"Adjust Q4 Quota for Territory Realignment",description:"15% quota reduction due to territory split",priority:"medium",status:"approved",entityType:"quota",entityId:"quota-rep-001-q4",requestType:"update",requestData:{repId:"user-rep-001",quarter:"Q4-2025",oldQuota:1e6,newQuota:85e4,reason:"Territory realignment"},workflowId:"wf-002",currentStep:1,totalSteps:1,submittedBy:"user-mgr-001",submittedAt:new Date(p.getTime()-432e6),decidedBy:"user-vp-001",decidedAt:new Date(p.getTime()-2592e5),decision:"approve",decisionNotes:"Approved based on territory documentation",createdAt:new Date(p.getTime()-432e6),updatedAt:new Date(p.getTime()-2592e5)},{id:"appr-003",tenantId:c,title:"Split Credit on Acme Corp Deal",description:"Request 50/50 split with overlay rep",priority:"low",status:"rejected",entityType:"deal",entityId:"deal-123",requestType:"split_credit",requestData:{dealId:"deal-123",primaryRep:"user-rep-002",secondaryRep:"user-rep-005",splitRatio:[50,50]},workflowId:"wf-003",currentStep:1,totalSteps:1,submittedBy:"user-rep-002",submittedAt:new Date(p.getTime()-864e6),decidedBy:"user-mgr-001",decidedAt:new Date(p.getTime()-6912e5),decision:"reject",decisionNotes:"Overlay rep was not involved in closing the deal. Standard policy applies (70/30).",createdAt:new Date(p.getTime()-864e6),updatedAt:new Date(p.getTime()-6912e5)}],y=[{id:"step-001",approvalId:"appr-001",sequence:0,approverId:"user-mgr-001",approverRole:"sales_manager",status:"pending",slaDeadline:new Date(p.getTime()+1728e5),createdAt:new Date(p.getTime()-1728e5)},{id:"step-002",approvalId:"appr-001",sequence:1,approverId:"user-exec-001",approverRole:"vp_sales",status:"pending",createdAt:new Date(p.getTime()-1728e5)},{id:"step-003",approvalId:"appr-002",sequence:0,approverId:"user-vp-001",approverRole:"vp_sales",status:"approved",decision:"approve",comments:"Approved based on territory documentation",decidedAt:new Date(p.getTime()-2592e5),createdAt:new Date(p.getTime()-432e6)},{id:"step-004",approvalId:"appr-003",sequence:0,approverId:"user-mgr-001",approverRole:"sales_manager",status:"rejected",decision:"reject",comments:"Overlay rep was not involved in closing the deal. Standard policy applies (70/30).",decidedAt:new Date(p.getTime()-6912e5),createdAt:new Date(p.getTime()-864e6)}];e.s(["syntheticApprovalWorkflowSteps",0,y,"syntheticApprovals",0,u],26977);let m="demo-tenant-001",f=new Date;e.s(["syntheticLinks",0,[{id:"link-001",tenantId:m,sourceEntityType:"policy",sourceEntityId:"pol-001",sourceEntityName:"Standard Commission Rate Policy v2.1.0",targetEntityType:"policy",targetEntityId:"pol-006",targetEntityName:"Standard Commission Rate Policy v2.0.0",linkType:"supersedes",bidirectional:!1,createdBy:"user-ops-001",createdAt:f},{id:"link-002",tenantId:m,sourceEntityType:"policy",sourceEntityId:"pol-001",sourceEntityName:"Standard Commission Rate Policy",targetEntityType:"territory",targetEntityId:"terr-003",targetEntityName:"US West",linkType:"covers_territory",bidirectional:!0,strength:1,createdBy:"user-ops-001",createdAt:f},{id:"link-003",tenantId:m,sourceEntityType:"policy",sourceEntityId:"pol-001",targetEntityType:"territory",targetEntityId:"terr-004",targetEntityName:"US East",linkType:"covers_territory",bidirectional:!0,strength:1,createdBy:"user-ops-001",createdAt:f},{id:"link-004",tenantId:m,sourceEntityType:"policy",sourceEntityId:"pol-001",targetEntityType:"territory",targetEntityId:"terr-005",targetEntityName:"US Central",linkType:"covers_territory",bidirectional:!0,strength:1,createdBy:"user-ops-001",createdAt:f},{id:"link-005",tenantId:m,sourceEntityType:"policy",sourceEntityId:"pol-002",sourceEntityName:"Split Credit Policy",targetEntityType:"territory",targetEntityId:"terr-001",targetEntityName:"Americas",linkType:"covers_territory",bidirectional:!0,strength:1,createdBy:"user-ops-002",createdAt:f},{id:"link-006",tenantId:m,sourceEntityType:"approval",sourceEntityId:"appr-001",sourceEntityName:"Publish Territory Overlap Policy",targetEntityType:"policy",targetEntityId:"pol-004",targetEntityName:"Territory Overlap Resolution Policy",linkType:"requires_approval_from",bidirectional:!1,createdBy:"user-ops-002",createdAt:f},{id:"link-007",tenantId:m,sourceEntityType:"territory",sourceEntityId:"terr-002",sourceEntityName:"United States",targetEntityType:"territory",targetEntityId:"terr-001",targetEntityName:"Americas",linkType:"child_of",bidirectional:!1,createdBy:"user-admin-001",createdAt:f},{id:"link-008",tenantId:m,sourceEntityType:"territory",sourceEntityId:"terr-003",sourceEntityName:"US West",targetEntityType:"territory",targetEntityId:"terr-002",targetEntityName:"United States",linkType:"child_of",bidirectional:!1,createdBy:"user-admin-001",createdAt:f},{id:"link-009",tenantId:m,sourceEntityType:"territory",sourceEntityId:"terr-004",sourceEntityName:"US East",targetEntityType:"territory",targetEntityId:"terr-002",targetEntityName:"United States",linkType:"child_of",bidirectional:!1,createdBy:"user-admin-001",createdAt:f},{id:"link-010",tenantId:m,sourceEntityType:"territory",sourceEntityId:"terr-005",sourceEntityName:"US Central",targetEntityType:"territory",targetEntityId:"terr-002",targetEntityName:"United States",linkType:"child_of",bidirectional:!1,createdBy:"user-admin-001",createdAt:f},{id:"link-011",tenantId:m,sourceEntityType:"policy",sourceEntityId:"pol-002",sourceEntityName:"Split Credit Policy",targetEntityType:"policy",targetEntityId:"pol-001",targetEntityName:"Standard Commission Rate Policy",linkType:"references",bidirectional:!1,description:"Split credit policy references commission rates",createdBy:"user-ops-002",createdAt:f},{id:"link-012",tenantId:m,sourceEntityType:"policy",sourceEntityId:"pol-003",sourceEntityName:"Quota Adjustment Policy",targetEntityType:"policy",targetEntityId:"pol-004",targetEntityName:"Territory Overlap Resolution Policy",linkType:"references",bidirectional:!1,description:"Quota adjustments may reference territory overlap resolution",createdBy:"user-ops-001",createdAt:f}]],96798),e.i(11012),e.i(99187),e.i(77880),e.s([],26076)},72340,e=>{"use strict";var t=e.i(97942);e.i(26076);var i=e.i(19892),a=e.i(18352);class r{policies;constructor(){const e=(0,a.isDemoDataEnabled)();this.policies=new Map(e?i.syntheticPolicies.map(e=>[e.id,e]):[])}async findAll(e){let t=Array.from(this.policies.values());if(!e)return t;if(e.tenantId&&(t=t.filter(t=>t.tenantId===e.tenantId)),e.status&&(t=t.filter(t=>t.status===e.status)),e.category&&(t=t.filter(t=>t.category===e.category)),e.effectiveBefore&&(t=t.filter(t=>t.effectiveDate<=e.effectiveBefore)),e.effectiveAfter&&(t=t.filter(t=>t.effectiveDate>=e.effectiveAfter)),e.createdBy&&(t=t.filter(t=>t.createdBy===e.createdBy)),e.search){let i=e.search.toLowerCase();t=t.filter(e=>e.name.toLowerCase().includes(i)||e.description?.toLowerCase().includes(i)||e.content.toLowerCase().includes(i))}return t.sort((e,t)=>t.effectiveDate.getTime()-e.effectiveDate.getTime())}async findById(e){return this.policies.get(e)||null}async findByStatus(e,t){return this.findAll({tenantId:e,status:t})}async findActive(e,t){let i=t||new Date;return Array.from(this.policies.values()).filter(t=>t.tenantId===e&&"published"===t.status&&t.effectiveDate<=i&&(!t.expirationDate||t.expirationDate>i))}async findVersions(e){let t=this.policies.get(e);if(!t)return[];let i=[t],a=t.id;for(;a;){let e=this.policies.get(a);if(!e?.supersededByPolicyId)break;let t=Array.from(this.policies.values()).find(e=>e.supersededByPolicyId===a);if(t)i.push(t),a=t.id;else break}let r=t.supersededByPolicyId;for(;r;){let e=this.policies.get(r);if(!e)break;i.unshift(e),r=e.supersededByPolicyId}return i}async findLatestVersion(e,t){let i=Array.from(this.policies.values()).filter(i=>i.tenantId===e&&i.name===t);return 0===i.length?null:(i.sort((e,t)=>{let[i,a,r]=e.version.split(".").map(Number),[n,s,o]=t.version.split(".").map(Number);return i!==n?n-i:a!==s?s-a:o-r}),i[0])}async create(e){let t={...e,id:`pol-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,status:"draft",version:e.version||"0.1.0",createdAt:new Date};return this.policies.set(t.id,t),t}async update(e){let t=this.policies.get(e.id);if(!t)throw Error(`Policy ${e.id} not found`);let i={...t,...e,updatedAt:new Date};return this.policies.set(i.id,i),i}async createVersion(e,i,a){let r=this.policies.get(e);if(!r)throw Error(`Policy ${e} not found`);let n=(0,t.nextVersion)(r.version,a),s={...r,...i,id:`pol-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,version:n,status:"draft",createdAt:new Date,updatedAt:new Date,supersededByPolicyId:void 0},o={...r,status:"superseded",supersededByPolicyId:s.id,expirationDate:new Date,updatedAt:new Date};return this.policies.set(o.id,o),this.policies.set(s.id,s),s}async publish(e,t){let i=this.policies.get(e);if(!i)throw Error(`Policy ${e} not found`);if("draft"!==i.status)throw Error(`Can only publish draft policies. Current status: ${i.status}`);let a={...i,status:"published",approvedBy:t,approvedAt:new Date,updatedAt:new Date};return this.policies.set(a.id,a),a}async retire(e,t){let i=this.policies.get(e);if(!i)throw Error(`Policy ${e} not found`);let a={...i,status:"retired",expirationDate:new Date,updatedBy:t,updatedAt:new Date};return this.policies.set(a.id,a),a}async delete(e,t){if(!this.policies.get(e))throw Error(`Policy ${e} not found`);this.policies.delete(e)}async countByStatus(e){let t=Array.from(this.policies.values()).filter(t=>t.tenantId===e),i={draft:0,published:0,superseded:0,retired:0};return t.forEach(e=>{i[e.status]=(i[e.status]||0)+1}),i}async search(e,t){return this.findAll({tenantId:e,search:t})}}e.s(["SyntheticPolicyProvider",()=>r])},96366,e=>{"use strict";var t=e.i(97942),i=e.i(16496);class a{prisma=(0,i.getPrismaClient)();async findAll(e){let t={};return e?.tenantId&&(t.tenantId=e.tenantId),e?.status&&(t.status=e.status),e?.category&&(t.category=e.category),e?.createdBy&&(t.createdBy=e.createdBy),e?.effectiveAfter&&(t.effectiveDate={gte:e.effectiveAfter}),e?.effectiveBefore&&(t.effectiveDate={...t.effectiveDate,lte:e.effectiveBefore}),await this.prisma.policy.findMany({where:t,orderBy:{createdAt:"desc"}})}async findById(e){return await this.prisma.policy.findUnique({where:{id:e}})}async findByStatus(e,t){return await this.prisma.policy.findMany({where:{tenantId:e,status:t},orderBy:{createdAt:"desc"}})}async findActive(e,t){let i=t||new Date;return await this.prisma.policy.findMany({where:{tenantId:e,status:"published",effectiveDate:{lte:i},OR:[{expirationDate:null},{expirationDate:{gte:i}}]},orderBy:{effectiveDate:"desc"}})}async findVersions(e){let t=await this.findById(e);return t?await this.prisma.policy.findMany({where:{tenantId:t.tenantId,name:t.name},orderBy:{version:"asc"}}):[]}async findLatestVersion(e,t){return(await this.prisma.policy.findMany({where:{tenantId:e,name:t},orderBy:{version:"desc"},take:1}))[0]}async create(e){return await this.prisma.policy.create({data:{...e,metadata:e.metadata?JSON.parse(JSON.stringify(e.metadata)):null}})}async update(e){let{id:t,...i}=e;return await this.prisma.policy.update({where:{id:t},data:{...i,metadata:i.metadata?JSON.parse(JSON.stringify(i.metadata)):void 0}})}async createVersion(e,i,a){let r=await this.findById(e);if(!r)throw Error(`Policy ${e} not found`);let n=(0,t.nextVersion)(r.version,a);await this.update({id:e,status:"superseded",updatedBy:i.updatedBy||r.updatedBy||r.createdBy});let s=await this.create({...r,...i,version:n,status:"draft",parentPolicyId:r.parentPolicyId,supersededByPolicyId:void 0,approvedBy:void 0,approvedAt:void 0,createdBy:i.updatedBy||r.createdBy});return await this.update({id:e,supersededByPolicyId:s.id,updatedBy:i.updatedBy||r.updatedBy||r.createdBy}),s}async publish(e,t){return this.update({id:e,status:"published",approvedBy:t,approvedAt:new Date,updatedBy:t})}async retire(e,t){return this.update({id:e,status:"retired",updatedBy:t})}async delete(e,t){await this.retire(e,t)}async countByStatus(e){return(await this.prisma.policy.groupBy({by:["status"],where:{tenantId:e},_count:{status:!0}})).reduce((e,t)=>(e[t.status]=t._count.status,e),{})}async search(e,t){return await this.prisma.policy.findMany({where:{tenantId:e,OR:[{name:{contains:t,mode:"insensitive"}},{description:{contains:t,mode:"insensitive"}},{content:{contains:t,mode:"insensitive"}}]},orderBy:{createdAt:"desc"}})}}e.s(["LivePolicyProvider",()=>a])},59961,e=>{"use strict";var t=e.i(18352);e.i(26076);var i=e.i(31270);class a{territories;constructor(){const e=(0,t.isDemoDataEnabled)();this.territories=new Map(e?i.syntheticTerritories.map(e=>[e.id,e]):[])}async findAll(e){let t=Array.from(this.territories.values());if(!e)return t;if(e.tenantId&&(t=t.filter(t=>t.tenantId===e.tenantId)),e.status&&(t=t.filter(t=>t.status===e.status)),e.type&&(t=t.filter(t=>t.type===e.type)),e.parentTerritoryId&&(t=t.filter(t=>t.parentTerritoryId===e.parentTerritoryId)),e.assignedToUserId&&(t=t.filter(t=>t.assignedToUserId===e.assignedToUserId)),e.search){let i=e.search.toLowerCase();t=t.filter(e=>e.name.toLowerCase().includes(i)||e.code.toLowerCase().includes(i)||e.description?.toLowerCase().includes(i))}return t.sort((e,t)=>e.level-t.level||e.name.localeCompare(t.name))}async findById(e){return this.territories.get(e)||null}async findByStatus(e,t){return this.findAll({tenantId:e,status:t})}async findRoots(e){return Array.from(this.territories.values()).filter(t=>t.tenantId===e&&!t.parentTerritoryId)}async findChildren(e){return Array.from(this.territories.values()).filter(t=>t.parentTerritoryId===e)}async findHierarchy(e){return this.findAll({tenantId:e})}async findByAssignee(e){return Array.from(this.territories.values()).filter(t=>t.assignedToUserId===e)}async create(e){let t={...e,id:`terr-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,level:e.parentTerritoryId?(this.territories.get(e.parentTerritoryId)?.level||0)+1:0,path:e.parentTerritoryId?`${this.territories.get(e.parentTerritoryId)?.path||""}/${Date.now()}`:`/${Date.now()}`,createdAt:new Date};return this.territories.set(t.id,t),t}async update(e){let t=this.territories.get(e.id);if(!t)throw Error(`Territory ${e.id} not found`);let i={...t,...e,updatedAt:new Date};return this.territories.set(i.id,i),i}async assign(e,t,i){let a=this.territories.get(e);if(!a)throw Error(`Territory ${e} not found`);let r={...a,assignedToUserId:t,assignedAt:new Date,updatedBy:i,updatedAt:new Date};return this.territories.set(r.id,r),r}async unassign(e,t){let i=this.territories.get(e);if(!i)throw Error(`Territory ${e} not found`);let a={...i,assignedToUserId:void 0,assignedAt:void 0,updatedBy:t,updatedAt:new Date};return this.territories.set(a.id,a),a}async delete(e,t){this.territories.delete(e)}async getAssignmentHistory(e){return[]}async countByType(e){let t=Array.from(this.territories.values()).filter(t=>t.tenantId===e),i={};return t.forEach(e=>{i[e.type]=(i[e.type]||0)+1}),i}}e.s(["SyntheticTerritoryProvider",()=>a])},91631,e=>{"use strict";var t=e.i(18352);e.i(26076);var i=e.i(26977);class a{approvals;workflowSteps;constructor(){const e=(0,t.isDemoDataEnabled)();this.approvals=new Map(e?i.syntheticApprovals.map(e=>[e.id,e]):[]),this.workflowSteps=new Map(e?i.syntheticApprovalWorkflowSteps.map(e=>[e.id,e]):[])}async findAll(e){let t=Array.from(this.approvals.values());if(!e)return t;if(e.tenantId&&(t=t.filter(t=>t.tenantId===e.tenantId)),e.status&&(t=t.filter(t=>t.status===e.status)),e.priority&&(t=t.filter(t=>t.priority===e.priority)),e.entityType&&(t=t.filter(t=>t.entityType===e.entityType)),e.entityId&&(t=t.filter(t=>t.entityId===e.entityId)),e.submittedBy&&(t=t.filter(t=>t.submittedBy===e.submittedBy)),e.decidedBy&&(t=t.filter(t=>t.decidedBy===e.decidedBy)),e.search){let i=e.search.toLowerCase();t=t.filter(e=>e.title.toLowerCase().includes(i)||e.description?.toLowerCase().includes(i))}return t.sort((e,t)=>t.submittedAt.getTime()-e.submittedAt.getTime())}async findById(e){return this.approvals.get(e)||null}async findPending(e,t){let i=Array.from(this.approvals.values()).filter(t=>t.tenantId===e&&"pending"===t.status);if(t){let e=new Set(Array.from(this.workflowSteps.values()).filter(e=>e.approverId===t&&"pending"===e.status).map(e=>e.approvalId));i=i.filter(t=>e.has(t.id))}return i}async findByEntity(e,t){return Array.from(this.approvals.values()).filter(i=>i.entityType===e&&i.entityId===t)}async findBySubmitter(e){return Array.from(this.approvals.values()).filter(t=>t.submittedBy===e)}async create(e){let t={...e,id:`appr-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,status:"pending",currentStep:0,createdAt:new Date};return this.approvals.set(t.id,t),t}async decide(e){let t=this.approvals.get(e.approvalId);if(!t)throw Error(`Approval ${e.approvalId} not found`);let i={...t,status:"approve"===e.decision?"approved":"rejected",decision:e.decision,decidedBy:e.decidedBy,decidedAt:new Date,decisionNotes:e.comments,updatedAt:new Date};return this.approvals.set(i.id,i),i}async withdraw(e,t){let i=this.approvals.get(e);if(!i)throw Error(`Approval ${e} not found`);let a={...i,status:"withdrawn",updatedAt:new Date};return this.approvals.set(a.id,a),a}async escalate(e,t){let i=this.approvals.get(e);if(!i)throw Error(`Approval ${e} not found`);let a={...i,escalatedAt:new Date,updatedAt:new Date};return this.approvals.set(a.id,a),a}async getWorkflowSteps(e){return Array.from(this.workflowSteps.values()).filter(t=>t.approvalId===e).sort((e,t)=>e.sequence-t.sequence)}async getStats(e){let t=Array.from(this.approvals.values()).filter(t=>t.tenantId===e),i=t.filter(e=>"pending"===e.status).length,a=t.filter(e=>"approved"===e.status).length,r=t.filter(e=>"rejected"===e.status).length,n=t.filter(e=>e.decidedAt),s=n.reduce((e,t)=>e+(t.decidedAt.getTime()-t.submittedAt.getTime()),0)/(n.length||1),o=t.filter(e=>e.slaDeadline),d=o.filter(e=>!e.decidedAt||e.decidedAt<=e.slaDeadline).length;return{totalPending:i,totalApproved:a,totalRejected:r,avgDecisionTimeHours:s/36e5,slaComplianceRate:o.length>0?d/o.length*100:100}}async countByStatus(e){let t=Array.from(this.approvals.values()).filter(t=>t.tenantId===e),i={};return t.forEach(e=>{i[e.status]=(i[e.status]||0)+1}),i}}e.s(["SyntheticApprovalProvider",()=>a])},47188,e=>{"use strict";class t{logs;constructor(){this.logs=new Map}async findAll(e){let t=Array.from(this.logs.values());if(!e)return t;if(e.tenantId&&(t=t.filter(t=>t.tenantId===e.tenantId)),e.eventType&&(t=t.filter(t=>t.eventType===e.eventType)),e.severity&&(t=t.filter(t=>t.severity===e.severity)),e.entityType&&(t=t.filter(t=>t.entityType===e.entityType)),e.entityId&&(t=t.filter(t=>t.entityId===e.entityId)),e.actorId&&(t=t.filter(t=>t.actorId===e.actorId)),e.occurredAfter&&(t=t.filter(t=>t.occurredAt>=e.occurredAfter)),e.occurredBefore&&(t=t.filter(t=>t.occurredAt<=e.occurredBefore)),e.search){let i=e.search.toLowerCase();t=t.filter(e=>e.message.toLowerCase().includes(i))}return t.sort((e,t)=>t.occurredAt.getTime()-e.occurredAt.getTime())}async findByEntity(e,t){return Array.from(this.logs.values()).filter(i=>i.entityType===e&&i.entityId===t).sort((e,t)=>t.occurredAt.getTime()-e.occurredAt.getTime())}async findByActor(e){return Array.from(this.logs.values()).filter(t=>t.actorId===e).sort((e,t)=>t.occurredAt.getTime()-e.occurredAt.getTime())}async findByEventType(e,t){return Array.from(this.logs.values()).filter(i=>i.tenantId===e&&i.eventType===t).sort((e,t)=>t.occurredAt.getTime()-e.occurredAt.getTime())}async findRecent(e,t=50){return Array.from(this.logs.values()).filter(t=>t.tenantId===e).sort((e,t)=>t.occurredAt.getTime()-e.occurredAt.getTime()).slice(0,t)}async create(e){let t={...e,id:`audit-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,occurredAt:new Date};return this.logs.set(t.id,t),t}async createBatch(e){return Promise.all(e.map(e=>this.create(e)))}async getSummary(e,t,i){let a=Array.from(this.logs.values()).filter(t=>t.tenantId===e);t&&(a=a.filter(e=>e.occurredAt>=t)),i&&(a=a.filter(e=>e.occurredAt<=i));let r={},n={},s=new Map;a.forEach(e=>{r[e.eventType]=(r[e.eventType]||0)+1,n[e.severity]=(n[e.severity]||0)+1;let t=s.get(e.actorId)||{name:e.actorName,count:0};t.count++,s.set(e.actorId,t)});let o=Array.from(s.entries()).map(([e,t])=>({actorId:e,actorName:t.name,eventCount:t.count})).sort((e,t)=>t.eventCount-e.eventCount).slice(0,10),d=a.sort((e,t)=>t.occurredAt.getTime()-e.occurredAt.getTime()).slice(0,20);return{totalEvents:a.length,eventsByType:r,eventsBySeverity:n,topActors:o,recentEvents:d}}async countByEventType(e){let t=Array.from(this.logs.values()).filter(t=>t.tenantId===e),i={};return t.forEach(e=>{i[e.eventType]=(i[e.eventType]||0)+1}),i}async countBySeverity(e){let t=Array.from(this.logs.values()).filter(t=>t.tenantId===e),i={};return t.forEach(e=>{i[e.severity]=(i[e.severity]||0)+1}),i}async export(e,t){let i=await this.findAll(e);return"json"===t?JSON.stringify(i,null,2):["ID,Tenant ID,Event Type,Severity,Message,Entity Type,Entity ID,Actor ID,Occurred At",...i.map(e=>[e.id,e.tenantId,e.eventType,e.severity,e.message,e.entityType,e.entityId,e.actorId,e.occurredAt.toISOString()]).map(e=>e.join(","))].join("\n")}}e.s(["SyntheticAuditProvider",()=>t])},88870,e=>{"use strict";var t=e.i(18352);e.i(26076);var i=e.i(96798);class a{links;constructor(){const e=(0,t.isDemoDataEnabled)();this.links=new Map(e?i.syntheticLinks.map(e=>[e.id,e]):[])}async findAll(e){let t=Array.from(this.links.values()).filter(e=>!e.deletedAt);return e?(e.tenantId&&(t=t.filter(t=>t.tenantId===e.tenantId)),e.sourceEntityType&&(t=t.filter(t=>t.sourceEntityType===e.sourceEntityType)),e.sourceEntityId&&(t=t.filter(t=>t.sourceEntityId===e.sourceEntityId)),e.targetEntityType&&(t=t.filter(t=>t.targetEntityType===e.targetEntityType)),e.targetEntityId&&(t=t.filter(t=>t.targetEntityId===e.targetEntityId)),e.linkType&&(t=t.filter(t=>t.linkType===e.linkType)),e.includeDeleted&&(t=Array.from(this.links.values())),t.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime())):t}async findById(e){let t=this.links.get(e);return t&&!t.deletedAt?t:null}async findFromSource(e,t){return Array.from(this.links.values()).filter(i=>i.sourceEntityType===e&&i.sourceEntityId===t&&!i.deletedAt)}async findToTarget(e,t){return Array.from(this.links.values()).filter(i=>i.targetEntityType===e&&i.targetEntityId===t&&!i.deletedAt)}async findBetween(e,t,i,a){return Array.from(this.links.values()).filter(r=>r.sourceEntityType===e&&r.sourceEntityId===t&&r.targetEntityType===i&&r.targetEntityId===a&&!r.deletedAt)}async findByType(e,t){return Array.from(this.links.values()).filter(i=>i.tenantId===e&&i.linkType===t&&!i.deletedAt)}async create(e){let t={...e,id:`link-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date};return this.links.set(t.id,t),t}async createBatch(e){return Promise.all(e.map(e=>this.create(e)))}async delete(e,t){let i=this.links.get(e);if(!i)throw Error(`Link ${e} not found`);let a={...i,deletedBy:t,deletedAt:new Date};this.links.set(a.id,a)}async deleteByEntity(e,t,i){let a=Array.from(this.links.values()).filter(i=>i.sourceEntityType===e&&i.sourceEntityId===t||i.targetEntityType===e&&i.targetEntityId===t);for(let e of a)await this.delete(e.id,i);return a.length}async buildGraph(e,t,i=2){let a=new Map,r=[],n=new Set,s=[{type:e,id:t,level:0}];for(;s.length>0;){let e=s.shift(),t=`${e.type}:${e.id}`;if(!n.has(t)&&!(e.level>i)){for(let o of(n.add(t),a.set(t,{id:t,type:e.type,name:`${e.type} ${e.id}`}),await this.findFromSource(e.type,e.id)))r.push({id:o.id,source:t,target:`${o.targetEntityType}:${o.targetEntityId}`,linkType:o.linkType,label:o.linkType.replace(/_/g," ")}),e.level<i&&s.push({type:o.targetEntityType,id:o.targetEntityId,level:e.level+1});for(let a of(await this.findToTarget(e.type,e.id)))r.push({id:a.id,source:`${a.sourceEntityType}:${a.sourceEntityId}`,target:t,linkType:a.linkType,label:a.linkType.replace(/_/g," ")}),e.level<i&&s.push({type:a.sourceEntityType,id:a.sourceEntityId,level:e.level+1})}}return{nodes:Array.from(a.values()),edges:r}}async buildCoverageMatrix(e,t,i){return{rowEntityType:e,columnEntityType:t,rows:[],columns:[],cells:[]}}async findOrphans(e,t){let i=Array.from(this.links.values()).filter(t=>t.tenantId===e&&!t.deletedAt),a=new Set;return i.forEach(e=>{e.sourceEntityType===t&&a.add(e.sourceEntityId),e.targetEntityType===t&&a.add(e.targetEntityId)}),[]}async countByType(e){let t=Array.from(this.links.values()).filter(t=>t.tenantId===e&&!t.deletedAt),i={};return t.forEach(e=>{i[e.linkType]=(i[e.linkType]||0)+1}),i}}e.s(["SyntheticLinkProvider",()=>a])},2977,e=>{"use strict";class t{searchIndex;constructor(){this.searchIndex=new Map}async index(e){let t={...e,id:`idx-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,searchableText:this.buildSearchableText(e),indexedAt:new Date};return this.searchIndex.set(t.id,t),t}async indexBatch(e){return Promise.all(e.map(e=>this.index(e)))}async updateIndex(e){let t=this.searchIndex.get(e.id);if(!t)throw Error(`IndexItem ${e.id} not found`);let i={...t,...e,searchableText:this.buildSearchableText(e)};return this.searchIndex.set(i.id,i),i}async removeFromIndex(e,t){Array.from(this.searchIndex.values()).filter(i=>i.entityType===e&&i.entityId===t).forEach(e=>this.searchIndex.delete(e.id))}async reindex(e,t,i){return await this.removeFromIndex(e,t),this.index(i)}async reindexAll(e,t){return 0}async search(e){let t=Date.now(),i=Array.from(this.searchIndex.values());e.tenantId&&(i=i.filter(t=>t.tenantId===e.tenantId)),e.entityTypes&&(i=i.filter(t=>e.entityTypes.includes(t.entityType))),e.categories&&(i=i.filter(t=>e.categories.includes(t.category||""))),e.tags&&e.tags.length>0&&(i=i.filter(t=>e.tags.some(e=>t.tags.includes(e)))),e.status&&(i=i.filter(t=>t.status===e.status)),e.ownerId&&(i=i.filter(t=>t.ownerId===e.ownerId)),e.effectiveAfter&&(i=i.filter(t=>t.effectiveDate&&t.effectiveDate>=e.effectiveAfter)),e.effectiveBefore&&(i=i.filter(t=>t.effectiveDate&&t.effectiveDate<=e.effectiveBefore));let a=e.query.toLowerCase(),r=i.map(e=>{let t=e.searchableText||"",i=(t.toLowerCase().match(RegExp(a,"gi"))||[]).length*(e.boost||1);return{item:e,score:i,highlights:this.extractHighlights(t,a)}}).filter(e=>e.score>0);"relevance"===e.sortBy?r.sort((e,t)=>t.score-e.score):"date"===e.sortBy?r.sort((e,t)=>t.item.lastUpdatedAt.getTime()-e.item.lastUpdatedAt.getTime()):"title"===e.sortBy&&r.sort((e,t)=>e.item.title.localeCompare(t.item.title)),"asc"===e.sortOrder&&r.reverse();let n=r.length,s=e.offset||0,o=e.limit||20,d=r.slice(s,s+o),l=Date.now()-t;return{query:e.query,results:d,total:n,limit:o,offset:s,executionTimeMs:l}}async suggest(e,t,i=10){let a=Array.from(this.searchIndex.values()).filter(t=>t.tenantId===e),r=new Set;return a.forEach(e=>{e.title.toLowerCase().startsWith(t.toLowerCase())&&r.add(e.title)}),Array.from(r).slice(0,i)}async getAggregations(e,t){let i=Array.from(this.searchIndex.values()).filter(t=>t.tenantId===e);if(t){let e=t.toLowerCase();i=i.filter(t=>(t.searchableText||"").toLowerCase().includes(e))}let a=new Map,r=new Map,n=new Map,s=new Map;return i.forEach(e=>{a.set(e.entityType,(a.get(e.entityType)||0)+1),e.category&&r.set(e.category,(r.get(e.category)||0)+1),e.tags.forEach(e=>{n.set(e,(n.get(e)||0)+1)}),e.status&&s.set(e.status,(s.get(e.status)||0)+1)}),{entityTypes:Array.from(a.entries()).map(([e,t])=>({key:e,count:t})),categories:Array.from(r.entries()).map(([e,t])=>({key:e,count:t})),tags:Array.from(n.entries()).map(([e,t])=>({key:e,count:t})),statuses:Array.from(s.entries()).map(([e,t])=>({key:e,count:t}))}}async findByEntity(e,t){return Array.from(this.searchIndex.values()).filter(i=>i.entityType===e&&i.entityId===t)[0]||null}async findByEntityType(e,t){return Array.from(this.searchIndex.values()).filter(i=>i.tenantId===e&&i.entityType===t)}async count(e){return Array.from(this.searchIndex.values()).filter(t=>t.tenantId===e).length}async countByEntityType(e){let t=Array.from(this.searchIndex.values()).filter(t=>t.tenantId===e),i={};return t.forEach(e=>{i[e.entityType]=(i[e.entityType]||0)+1}),i}async clearIndex(e){let t=Array.from(this.searchIndex.values()).filter(t=>t.tenantId===e);return t.forEach(e=>this.searchIndex.delete(e.id)),t.length}buildSearchableText(e){return[e.title||"",e.description||"",e.content||""].filter(Boolean).join(" ")}extractHighlights(e,t,i=100){let a=RegExp(`(.{0,${i/2}})(${t})(.{0,${i/2}})`,"gi");return[...e.matchAll(a)].slice(0,3).map(e=>`...${e[1]}<mark>${e[2]}</mark>${e[3]}...`)}}e.s(["SyntheticSearchProvider",()=>t])},28773,e=>{"use strict";var t=e.i(79153);class i{documents=new Map;idCounter=1;constructor(){this.initializeSPARCCDocuments()}initializeSPARCCDocuments(){let e=new Date().toISOString();t.ALL_GOVERNANCE_DOCUMENTS.forEach((t,i)=>{let a=`doc-${String(i+1).padStart(3,"0")}`,r={id:a,tenantId:"demo-tenant-001",documentCode:t.documentCode,title:t.title,description:t.description||"",documentType:t.documentType,category:t.category,tags:this.generateTags(t),version:t.version+".0",status:t.status,fileType:"md",filePath:`documents/${t.documentCode}.md`,fileSize:15e3+Math.floor(5e4*Math.random()),owner:t.owner,createdBy:t.owner,createdAt:new Date(this.generateCreatedDate(t.status)),lastUpdated:new Date(e),effectiveDate:t.effectiveDate?new Date(t.effectiveDate):void 0,retentionPeriod:7,legalReviewStatus:this.getLegalReviewStatus(t)};this.documents.set(a,r)})}generateTags(e){let t=[e.documentType.toLowerCase()];e.category&&t.push(e.category.toLowerCase().replace(/\s+/g,"-"));let i=e.documentCode.split("-")[0];return i&&t.push(i.toLowerCase()),(e.documentCode.includes("SGCC")||"GC-001"===e.documentCode)&&t.push("sgcc","committee"),(e.documentCode.includes("CRB")||"CRB-001"===e.documentCode)&&t.push("crb","windfall","large-deals"),e.title.toLowerCase().includes("compliance")&&t.push("compliance","legal"),e.title.toLowerCase().includes("spif")&&t.push("spif","incentives"),[...new Set(t)]}generateCreatedDate(e){return"APPROVED"===e||"ACTIVE"===e?"2025-11-01T00:00:00.000Z":"DRAFT"===e?"2025-12-10T00:00:00.000Z":"UNDER_REVIEW"===e?"2025-12-05T00:00:00.000Z":"2025-11-15T00:00:00.000Z"}getLegalReviewStatus(e){if("POLICY"===e.documentType){if("APPROVED"===e.status||"ACTIVE"===e.status)return"APPROVED";if("UNDER_REVIEW"===e.status||"DRAFT"===e.status)return"PENDING"}return"FRAMEWORK"===e.documentType&&"APPROVED"===e.status?"APPROVED":"NOT_REQUIRED"}async findAll(e){let t=Array.from(this.documents.values()).filter(t=>t.tenantId===e.tenantId);if(e.status&&(t=t.filter(t=>t.status===e.status)),e.documentType&&(t=t.filter(t=>t.documentType===e.documentType)),e.category&&(t=t.filter(t=>t.category===e.category)),e.search){let i=e.search.toLowerCase();t=t.filter(e=>e.title.toLowerCase().includes(i)||e.documentCode.toLowerCase().includes(i)||e.description&&e.description.toLowerCase().includes(i)||e.tags&&e.tags.some(e=>e.includes(i)))}return t.sort((e,t)=>t.lastUpdated.getTime()-e.lastUpdated.getTime()),t}async findById(e){return this.documents.get(e)||null}async findByType(e,t){return Array.from(this.documents.values()).filter(i=>i.tenantId===e&&i.documentType===t)}async findByStatus(e,t){return Array.from(this.documents.values()).filter(i=>i.tenantId===e&&i.status===t)}async findActive(e,t){let i=t||new Date;return Array.from(this.documents.values()).filter(t=>t.tenantId===e&&"ACTIVE"===t.status&&(!t.effectiveDate||t.effectiveDate<=i)&&(!t.expirationDate||t.expirationDate>i))}async findVersions(e){let t=await this.findById(e);return t?Array.from(this.documents.values()).filter(e=>e.documentCode===t.documentCode&&e.tenantId===t.tenantId):[]}async findLatestVersion(e,t){let i=Array.from(this.documents.values()).filter(i=>i.documentCode===t&&i.tenantId===e);return 0===i.length?null:(i.sort((e,t)=>t.version.localeCompare(e.version)),i[0])}async create(e){let t=`doc-custom-${this.idCounter++}`,i=new Date().toISOString(),a={id:t,tenantId:e.tenantId,documentCode:e.documentCode,title:e.title,description:e.description||"",documentType:e.documentType,category:e.category||"",tags:e.tags||[],version:e.version,status:e.status,fileType:e.fileType,filePath:e.filePath,fileSize:e.fileSize,owner:e.owner,createdBy:e.createdBy,createdAt:new Date(i),lastUpdated:new Date(i),retentionPeriod:e.retentionPeriod,legalReviewStatus:e.legalReviewStatus};return this.documents.set(t,a),a}async update(e){let t=await this.findById(e.id);if(!t)throw Error(`Document not found: ${e.id}`);let i={...t,...e,lastUpdated:new Date};return this.documents.set(e.id,i),i}async uploadFile(e,t,i){throw Error("uploadFile not implemented in synthetic provider")}async downloadFile(e){throw Error("downloadFile not implemented in synthetic provider")}async getFileUrl(e){let t=await this.findById(e);if(!t)throw Error(`Document not found: ${e}`);return t.filePath}async createVersion(e,t,i){throw Error("createVersion not implemented in synthetic provider")}async submitForReview(e,t){return this.update({id:e,updatedBy:t,status:"UNDER_REVIEW"})}async submitForApproval(e,t,i){return this.update({id:e,updatedBy:t,status:"PENDING_APPROVAL",approvalWorkflowId:i})}async approve(e,t,i){return this.update({id:e,updatedBy:t,status:"APPROVED"})}async activate(e,t){return this.update({id:e,updatedBy:t,status:"ACTIVE"})}async archive(e,t){return this.update({id:e,updatedBy:t,status:"ARCHIVED"})}async reject(e,t,i){return this.update({id:e,updatedBy:t,status:"DRAFT"})}async delete(e,t){if(!await this.findById(e))throw Error(`Document not found: ${e}`);this.documents.delete(e)}async countByStatus(e){let t={};return Array.from(this.documents.values()).filter(t=>t.tenantId===e).forEach(e=>{t[e.status]=(t[e.status]||0)+1}),t}async countByType(e){let t={};return Array.from(this.documents.values()).filter(t=>t.tenantId===e).forEach(e=>{t[e.documentType]=(t[e.documentType]||0)+1}),t}async search(e,t){return this.findAll({tenantId:e,search:t})}async findNeedingReview(e){let t=new Date;return Array.from(this.documents.values()).filter(i=>i.tenantId===e&&i.nextReview&&i.nextReview<=t)}async findPendingApproval(e){return this.findByStatus(e,"PENDING_APPROVAL")}async linkDocuments(e,t,i){let a=await this.findById(e);if(!a)throw Error(`Source document not found: ${e}`);let r=a.relatedDocs||[];r.includes(t)||await this.update({id:e,updatedBy:"system",relatedDocs:[...r,t]})}async unlinkDocuments(e,t){let i=await this.findById(e);if(!i)throw Error(`Source document not found: ${e}`);let a=i.relatedDocs||[];await this.update({id:e,updatedBy:"system",relatedDocs:a.filter(e=>e!==t)})}}e.s(["SyntheticDocumentProvider",()=>i])},62105,e=>{"use strict";var t=e.i(18352);class i{committees=new Map;constructor(){(0,t.isDemoDataEnabled)()&&this.initializeSampleCommittees()}initializeSampleCommittees(){let e=new Date,t={id:"comm-001",tenantId:"demo-tenant-001",name:"Sales Compensation Governance Committee",acronym:"SGCC",type:"PRIMARY",description:"Primary committee for sales compensation governance",chair:{id:"user-001",name:"Jane Smith",email:"jane.smith@company.com",role:"VP Sales Compensation",joinedAt:new Date("2024-01-01")},viceChair:{id:"user-002",name:"Bob Johnson",email:"bob.johnson@company.com",role:"CFO",joinedAt:new Date("2024-01-01")},members:[{id:"user-003",name:"Sarah Williams",email:"sarah.williams@company.com",role:"CHRO",joinedAt:new Date("2024-01-01")},{id:"user-004",name:"Michael Chen",email:"michael.chen@company.com",role:"General Counsel",joinedAt:new Date("2024-01-01")},{id:"user-005",name:"David Rodriguez",email:"david.rodriguez@company.com",role:"Chief Sales Officer",joinedAt:new Date("2024-01-01")},{id:"user-006",name:"Lisa Garcia",email:"lisa.garcia@company.com",role:"VP Sales Operations",joinedAt:new Date("2024-01-01")},{id:"user-007",name:"Tom Anderson",email:"tom.anderson@company.com",role:"Regional Sales Lead (AMER)",joinedAt:new Date("2024-06-01")}],decisionThresholds:[{decisionType:"SPIF_APPROVAL",amountMin:0,amountMax:5e4,authority:"SGCC",timelineDays:5},{decisionType:"SPIF_APPROVAL",amountMin:5e4,amountMax:25e4,authority:"SGCC+CFO",timelineDays:10},{decisionType:"SPIF_APPROVAL",amountMin:25e4,authority:"SGCC+CEO",timelineDays:15},{decisionType:"EXCEPTION_REQUEST",amountMin:0,amountMax:5e3,authority:"Manager",timelineDays:5},{decisionType:"EXCEPTION_REQUEST",amountMin:5e3,amountMax:25e3,authority:"Regional",timelineDays:10},{decisionType:"EXCEPTION_REQUEST",amountMin:25e3,authority:"CRB",timelineDays:15},{decisionType:"POLICY_CHANGE",authority:"SGCC+Legal",timelineDays:30}],approvalAuthority:["POLICY_APPROVAL","SPIF_APPROVAL","EXCEPTION_APPROVAL","WINDFALL_REVIEW"],meetingCadence:"Monthly",quorumRequirement:5,lastMeetingAt:new Date(e.getTime()-6048e5),nextMeetingAt:new Date(e.getTime()+18144e5),totalDecisions:45,totalMeetings:12,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-12-01")},i={id:"comm-002",tenantId:"demo-tenant-001",name:"Compensation Review Board",acronym:"CRB",type:"REVIEW_BOARD",description:"Board for reviewing large deals, SPIFs, and exceptions",chair:{id:"user-001",name:"Jane Smith",email:"jane.smith@company.com",role:"VP Sales Compensation",joinedAt:new Date("2024-01-01")},members:[{id:"user-008",name:"Jennifer Lee",email:"jennifer.lee@company.com",role:"Director of Finance",joinedAt:new Date("2024-01-01")},{id:"user-006",name:"Lisa Garcia",email:"lisa.garcia@company.com",role:"Manager, Sales Operations",joinedAt:new Date("2024-01-01")}],decisionThresholds:[{decisionType:"WINDFALL_REVIEW",amountMin:1e6,authority:"CRB",timelineDays:20},{decisionType:"SPIF_APPROVAL",amountMin:5e4,amountMax:25e4,authority:"CRB",timelineDays:15},{decisionType:"EXCEPTION_REQUEST",amountMin:25e3,authority:"CRB",timelineDays:15},{decisionType:"CLAWBACK_APPROVAL",amountMin:25e3,authority:"CRB",timelineDays:20}],approvalAuthority:["WINDFALL_REVIEW","LARGE_SPIF_APPROVAL","LARGE_EXCEPTION_APPROVAL","CLAWBACK_APPROVAL"],meetingCadence:"Monthly",quorumRequirement:2,lastMeetingAt:new Date(e.getTime()-12096e5),nextMeetingAt:new Date(e.getTime()+12096e5),totalDecisions:23,totalMeetings:12,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-12-01")};this.committees.set(t.id,t),this.committees.set(i.id,i)}async findAll(e){return Array.from(this.committees.values()).filter(t=>t.tenantId===e)}async findById(e){return this.committees.get(e)||null}async findByAcronym(e,t){return Array.from(this.committees.values()).filter(i=>i.tenantId===e&&i.acronym===t)[0]||null}async create(e){let t={...e,id:`comm-${Date.now()}`,totalDecisions:0,totalMeetings:0,createdAt:new Date,updatedAt:new Date};return this.committees.set(t.id,t),t}async update(e,t){let i=this.committees.get(e);if(!i)throw Error(`Committee ${e} not found`);let a={...i,...t,id:i.id,createdAt:i.createdAt,updatedAt:new Date};return this.committees.set(e,a),a}async addMember(e,t){let i=this.committees.get(e);if(!i)throw Error(`Committee ${e} not found`);return i.members.push(t),i.updatedAt=new Date,this.committees.set(e,i),i}async removeMember(e,t){let i=this.committees.get(e);if(!i)throw Error(`Committee ${e} not found`);return i.members=i.members.filter(e=>e.id!==t),i.updatedAt=new Date,this.committees.set(e,i),i}async updateThreshold(e,t){let i=this.committees.get(e);if(!i)throw Error(`Committee ${e} not found`);let a=i.decisionThresholds.findIndex(e=>e.decisionType===t.decisionType&&e.amountMin===t.amountMin&&e.amountMax===t.amountMax);return a>=0?i.decisionThresholds[a]=t:i.decisionThresholds.push(t),i.updatedAt=new Date,this.committees.set(e,i),i}async getAuthority(e,t,i){for(let a of Array.from(this.committees.values()).filter(t=>t.tenantId===e))for(let e of a.decisionThresholds)if(e.decisionType===t){if(void 0!==i){let t=!e.amountMin||i>=e.amountMin,r=!e.amountMax||i<=e.amountMax;if(t&&r)return{committee:a,threshold:e}}else if(!e.amountMin&&!e.amountMax)return{committee:a,threshold:e}}return null}async recordDecision(e,t,i){let a=this.committees.get(e);if(!a)throw Error(`Committee ${e} not found`);a.totalDecisions++,a.updatedAt=new Date,this.committees.set(e,a)}}e.s(["SyntheticCommitteeProvider",()=>i])},51554,e=>{"use strict";var t=e.i(11012),i=e.i(18352);class a{templates;sections;constructor(){const e=(0,i.isDemoDataEnabled)();this.templates=new Map(e?t.syntheticPlanTemplates.map(e=>[e.id,e]):[]),this.sections=new Map(e?t.syntheticTemplateSections.map(e=>[e.id,e]):[])}async findAll(e){let t=Array.from(this.templates.values());if(!e)return t;if(e.tenantId&&(t=t.filter(t=>t.tenantId===e.tenantId)),e.planType&&(t=t.filter(t=>t.planType===e.planType)),e.status&&(t=t.filter(t=>t.status===e.status)),void 0!==e.isSystemTemplate&&(t=t.filter(t=>t.isSystemTemplate===e.isSystemTemplate)),e.owner&&(t=t.filter(t=>t.owner===e.owner)),e.category&&(t=t.filter(t=>t.category===e.category)),e.tags&&e.tags.length>0&&(t=t.filter(t=>e.tags.some(e=>t.tags?.includes(e)))),e.search){let i=e.search.toLowerCase();t=t.filter(e=>e.name.toLowerCase().includes(i)||e.description?.toLowerCase().includes(i)||e.code.toLowerCase().includes(i))}return t.sort((e,t)=>t.lastUpdated.getTime()-e.lastUpdated.getTime())}async findById(e){return this.templates.get(e)||null}async findByCode(e,t){return Array.from(this.templates.values()).find(i=>i.tenantId===e&&i.code===t)||null}async create(e){let t={id:`tpl-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...e,createdAt:new Date,lastUpdated:new Date,usageCount:0};return this.templates.set(t.id,t),t}async update(e){let t=this.templates.get(e.id);if(!t)throw Error(`Template not found: ${e.id}`);let i={...t,...e,lastUpdated:new Date};return this.templates.set(i.id,i),i}async delete(e,t){if(!this.templates.get(e))throw Error(`Template not found: ${e}`);await this.update({id:e,status:"ARCHIVED"})}async hardDelete(e){for(let t of(await this.getSections(e)))this.sections.delete(t.id);this.templates.delete(e)}async createVersion(e,t,i){let a,r=await this.findById(e);if(!r)throw Error(`Template not found: ${e}`);let[n,s,o]=r.version.split(".").map(Number);switch(i){case"major":a=`${n+1}.0.0`;break;case"minor":a=`${n}.${s+1}.0`;break;case"patch":a=`${n}.${s}.${o+1}`}let d={...r,...t,id:`tpl-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,version:a,createdAt:new Date,lastUpdated:new Date,usageCount:0};return this.templates.set(d.id,d),d}async findVersions(e){let t=await this.findById(e);return t?Array.from(this.templates.values()).filter(e=>e.code===t.code).sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()):[]}async findLatestVersion(e,t){return Array.from(this.templates.values()).filter(i=>i.tenantId===e&&i.code===t).sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime())[0]||null}async clone(e){let t=await this.findById(e.sourceTemplateId);if(!t)throw Error(`Source template not found: ${e.sourceTemplateId}`);let i={...t,id:`tpl-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,code:e.newCode,name:e.newName,owner:e.newOwner,createdBy:e.clonedBy,source:"CLONED",isSystemTemplate:!1,clonedFromId:t.id,createdAt:new Date,lastUpdated:new Date,usageCount:0};if(this.templates.set(i.id,i),e.customizeSections)for(let e of(await this.getSections(t.id))){let t={...e,id:`sec-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,templateId:i.id};this.sections.set(t.id,t)}return i}async getSections(e){return Array.from(this.sections.values()).filter(t=>t.templateId===e).sort((e,t)=>e.orderIndex-t.orderIndex)}async getSectionTree(e){let t=await this.getSections(e),i=e=>t.filter(t=>t.parentSectionId===e).map(e=>({...e,children:i(e.id)}));return i(void 0)}async getSection(e){return this.sections.get(e)||null}async addSection(e){let t={id:`sec-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...e};return this.sections.set(t.id,t),t}async updateSection(e){let t=this.sections.get(e.id);if(!t)throw Error(`Section not found: ${e.id}`);let i={...t,...e};return this.sections.set(i.id,i),i}async deleteSection(e){this.sections.delete(e)}async reorderSections(e){for(let t of e.sectionOrders){let e=this.sections.get(t.sectionId);e&&(e.orderIndex=t.orderIndex,void 0!==t.parentSectionId&&(e.parentSectionId=t.parentSectionId),this.sections.set(e.id,e))}return this.getSections(e.templateId)}async getUsageStats(e){let t=await this.findById(e);if(!t)throw Error(`Template not found: ${e}`);return{templateId:t.id,templateCode:t.code,templateName:t.name,totalUsageCount:t.usageCount,activePlans:0,completedPlans:0,lastUsed:void 0,averageCompletionTime:void 0}}async getAllUsageStats(e){return Promise.all((await this.findAll({tenantId:e})).map(e=>this.getUsageStats(e.id)))}async incrementUsageCount(e){let t=await this.findById(e);t&&(t.usageCount+=1,this.templates.set(t.id,t))}async search(e,t){return this.findAll({tenantId:e,search:t})}async findByTags(e,t){return this.findAll({tenantId:e,tags:t})}async findSystemTemplates(){return this.findAll({isSystemTemplate:!0})}async countByStatus(e){let t=await this.findAll({tenantId:e}),i={};for(let e of t)i[e.status]=(i[e.status]||0)+1;return i}async countByType(e){let t=await this.findAll({tenantId:e}),i={};for(let e of t)i[e.planType]=(i[e.planType]||0)+1;return i}}e.s(["SyntheticPlanTemplateProvider",()=>a])},16229,e=>{"use strict";var t=e.i(99187),i=e.i(11012),a=e.i(18352);class r{plans;sections;constructor(){const e=(0,a.isDemoDataEnabled)();this.plans=new Map(e?t.syntheticPlans.map(e=>[e.id,e]):[]),this.sections=new Map(e?t.syntheticPlanSections.map(e=>[e.id,e]):[])}async findAll(e){let t=Array.from(this.plans.values());if(!e)return t;if(e.tenantId&&(t=t.filter(t=>t.tenantId===e.tenantId)),e.planType&&(t=t.filter(t=>t.planType===e.planType)),e.status&&(t=t.filter(t=>t.status===e.status)),e.owner&&(t=t.filter(t=>t.owner===e.owner)),e.createdFromTemplateId&&(t=t.filter(t=>t.createdFromTemplateId===e.createdFromTemplateId)),e.category&&(t=t.filter(t=>t.category===e.category)),e.tags&&e.tags.length>0&&(t=t.filter(t=>e.tags.some(e=>t.tags?.includes(e)))),e.createdAfter&&(t=t.filter(t=>t.createdAt>=e.createdAfter)),e.createdBefore&&(t=t.filter(t=>t.createdAt<=e.createdBefore)),e.search){let i=e.search.toLowerCase();t=t.filter(e=>e.title.toLowerCase().includes(i)||e.description?.toLowerCase().includes(i)||e.planCode.toLowerCase().includes(i))}return t.sort((e,t)=>t.lastUpdated.getTime()-e.lastUpdated.getTime())}async findById(e){return this.plans.get(e)||null}async findByCode(e,t){return Array.from(this.plans.values()).find(i=>i.tenantId===e&&i.planCode===t)||null}async create(e){let t={id:`plan-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...e,createdAt:new Date,lastUpdated:new Date,completionPercentage:0,sectionsCompleted:0,sectionsTotal:0};return this.plans.set(t.id,t),t}async createFromTemplate(e){let t={id:`plan-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,tenantId:e.tenantId,planCode:e.planCode,title:e.title,description:e.description,planType:"COMPENSATION_PLAN",category:e.category,tags:e.tags||[],version:"1.0.0",status:"DRAFT",createdFromTemplateId:e.templateId,templateSnapshot:{},owner:e.owner,createdBy:e.createdBy,updatedBy:void 0,approvalWorkflowId:void 0,createdAt:new Date,lastUpdated:new Date,effectiveDate:e.effectiveDate,expirationDate:e.expirationDate,publishedAt:void 0,documentId:void 0,supersedes:void 0,supersededBy:void 0,completionPercentage:0,sectionsCompleted:0,sectionsTotal:0,metadata:e.metadata||{}};this.plans.set(t.id,t);let a=Array.from(i.syntheticTemplateSections.values()).filter(t=>t.templateId===e.templateId),r=0;for(let i of a){if(e.customSections&&!e.customSections.includes(i.id))continue;let a={id:`sec-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,planId:t.id,parentSectionId:i.parentSectionId,sectionKey:i.sectionKey,title:i.title,description:i.description,orderIndex:i.orderIndex,level:i.level,isRequired:i.isRequired,content:i.contentTemplate||"",fieldValues:[],aiAgentRoles:i.aiAgentRoles||[],completionStatus:"NOT_STARTED",completionPercentage:0,reviewedBy:void 0,reviewedAt:void 0,reviewComments:void 0,createdAt:new Date,lastUpdated:new Date,metadata:{}};this.sections.set(a.id,a),r++}return t.sectionsTotal=r,this.plans.set(t.id,t),t}async update(e){let t=this.plans.get(e.id);if(!t)throw Error(`Plan not found: ${e.id}`);let i={...t,...e,lastUpdated:new Date};return this.plans.set(i.id,i),i}async delete(e,t){if(!this.plans.get(e))throw Error(`Plan not found: ${e}`);await this.update({id:e,status:"ARCHIVED",updatedBy:t})}async hardDelete(e){for(let t of(await this.getSections(e)))this.sections.delete(t.id);this.plans.delete(e)}async createVersion(e){let t,i=await this.findById(e.planId);if(!i)throw Error(`Plan not found: ${e.planId}`);let[a,r,n]=i.version.split(".").map(Number);switch(e.bumpType){case"major":t=`${a+1}.0.0`;break;case"minor":t=`${a}.${r+1}.0`;break;case"patch":t=`${a}.${r}.${n+1}`}let s={...i,...e.changes,id:`plan-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,version:t,status:"DRAFT",createdAt:new Date,lastUpdated:new Date,createdBy:e.createdBy,updatedBy:void 0,supersedes:i.id,completionPercentage:0,sectionsCompleted:0};return this.plans.set(s.id,s),i.supersededBy=s.id,i.status="SUPERSEDED",this.plans.set(i.id,i),s}async findVersions(e){let t=await this.findById(e);return t?Array.from(this.plans.values()).filter(e=>e.planCode===t.planCode).sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()):[]}async findLatestVersion(e,t){return Array.from(this.plans.values()).filter(i=>i.tenantId===e&&i.planCode===t).sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime())[0]||null}async getSections(e){return Array.from(this.sections.values()).filter(t=>t.planId===e).sort((e,t)=>e.orderIndex-t.orderIndex)}async getSectionTree(e){let t=await this.getSections(e),i=e=>t.filter(t=>t.parentSectionId===e).map(e=>({...e,children:i(e.id)}));return i(void 0)}async getSection(e){return this.sections.get(e)||null}async addSection(e){let t={id:`sec-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...e,completionPercentage:0,createdAt:new Date,lastUpdated:new Date};this.sections.set(t.id,t);let i=await this.findById(e.planId);return i&&(i.sectionsTotal+=1,this.plans.set(i.id,i)),t}async updateSection(e){let t=this.sections.get(e.id);if(!t)throw Error(`Section not found: ${e.id}`);let i={...t,...e,lastUpdated:new Date};return this.sections.set(i.id,i),i}async updateSectionContent(e){let t=await this.getSection(e.sectionId);if(!t)throw Error(`Section not found: ${e.sectionId}`);return t.content=e.content,t.lastUpdated=new Date,e.autoComplete&&e.content.trim().length>0&&(t.completionStatus="COMPLETED",t.completionPercentage=100),this.sections.set(t.id,t),await this.calculateCompletion(t.planId),t}async updateSectionFields(e){let t=await this.getSection(e.sectionId);if(!t)throw Error(`Section not found: ${e.sectionId}`);return t.fieldValues=e.fieldValues,t.lastUpdated=new Date,e.autoComplete&&(t.completionStatus="COMPLETED",t.completionPercentage=100),this.sections.set(t.id,t),await this.calculateCompletion(t.planId),t}async markSectionComplete(e){let t=await this.getSection(e.sectionId);if(!t)throw Error(`Section not found: ${e.sectionId}`);return t.completionStatus="COMPLETED",t.completionPercentage=100,t.lastUpdated=new Date,this.sections.set(t.id,t),await this.calculateCompletion(t.planId),t}async reviewSection(e){let t=await this.getSection(e.sectionId);if(!t)throw Error(`Section not found: ${e.sectionId}`);return t.reviewedBy=e.reviewedBy,t.reviewedAt=new Date,t.reviewComments=e.reviewComments,t.completionStatus=e.approved?"APPROVED":"UNDER_REVIEW",t.lastUpdated=new Date,this.sections.set(t.id,t),t}async deleteSection(e){let t=await this.getSection(e);if(!t)return;this.sections.delete(e);let i=await this.findById(t.planId);i&&(i.sectionsTotal=Math.max(0,i.sectionsTotal-1),await this.calculateCompletion(i.id))}async reorderSections(e){for(let t of e.sectionOrders){let e=this.sections.get(t.sectionId);e&&(e.orderIndex=t.orderIndex,void 0!==t.parentSectionId&&(e.parentSectionId=t.parentSectionId),e.lastUpdated=new Date,this.sections.set(e.id,e))}return this.getSections(e.planId)}async submitForReview(e){return this.update({id:e.planId,status:"UNDER_REVIEW",updatedBy:e.submittedBy})}async submitForApproval(e){return this.update({id:e.planId,status:"PENDING_APPROVAL",approvalWorkflowId:e.workflowId,updatedBy:e.submittedBy})}async approve(e){return this.update({id:e.planId,status:"APPROVED",updatedBy:e.approvedBy})}async publish(e){return await this.update({id:e.planId,status:"PUBLISHED",publishedAt:new Date,effectiveDate:e.effectiveDate,expirationDate:e.expirationDate,updatedBy:e.publishedBy})}async reject(e){return this.update({id:e.planId,status:"DRAFT",updatedBy:e.rejectedBy,metadata:{rejectionReason:e.reason}})}async archive(e){return this.update({id:e.planId,status:"ARCHIVED",updatedBy:e.archivedBy})}async generateDocument(e){let t=`doc-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;return await this.update({id:e.planId,documentId:t}),t}async calculateCompletion(e){let t=await this.findById(e);if(!t)throw Error(`Plan not found: ${e}`);let i=await this.getSections(e),a=i.filter(e=>"COMPLETED"===e.completionStatus).length,r=i.filter(e=>e.isRequired),n=r.filter(e=>"COMPLETED"===e.completionStatus).length,s=i.length>0?Math.round(a/i.length*100):0;return t.completionPercentage=s,t.sectionsCompleted=a,t.sectionsTotal=i.length,t.lastUpdated=new Date,this.plans.set(t.id,t),{planId:t.id,completionPercentage:s,sectionsCompleted:a,sectionsTotal:i.length,requiredSectionsCompleted:n,requiredSectionsTotal:r.length,lastUpdated:new Date}}async getCompletionStats(e){return this.calculateCompletion(e)}async countByStatus(e){let t=await this.findAll({tenantId:e}),i={};for(let e of t)i[e.status]=(i[e.status]||0)+1;return i}async countByType(e){let t=await this.findAll({tenantId:e}),i={};for(let e of t)i[e.planType]=(i[e.planType]||0)+1;return i}async search(e,t){return this.findAll({tenantId:e,search:t})}async findByOwner(e,t){return this.findAll({tenantId:e,owner:t})}async findByTemplate(e){return this.findAll({createdFromTemplateId:e})}async findPendingApproval(e){return this.findAll({tenantId:e,status:"PENDING_APPROVAL"})}async findOverdue(e){let t=new Date;return(await this.findAll({tenantId:e})).filter(e=>!!e.expirationDate&&!!(e.expirationDate<t))}}e.s(["SyntheticPlanProvider",()=>r])},52177,e=>{"use strict";var t=e.i(77880),i=e.i(18352);class a{frameworks;constructor(){const e=(0,i.isDemoDataEnabled)();this.frameworks=new Map(e?t.syntheticGovernanceFrameworks.map(e=>[e.id,e]):[])}async findAll(e){let t=Array.from(this.frameworks.values());if(!e)return t;if(e.tenantId&&(t=t.filter(t=>t.tenantId===e.tenantId||t.isGlobal)),e.category&&(t=t.filter(t=>t.category===e.category)),e.status&&(t=t.filter(t=>t.status===e.status)),void 0!==e.isGlobal&&(t=t.filter(t=>t.isGlobal===e.isGlobal)),void 0!==e.isMandatory&&(t=t.filter(t=>t.isMandatory===e.isMandatory)),e.applicableTo&&(t=t.filter(t=>t.applicableTo&&t.applicableTo.includes(e.applicableTo))),e.search){let i=e.search.toLowerCase();t=t.filter(e=>e.title.toLowerCase().includes(i)||e.content.toLowerCase().includes(i)||e.code.toLowerCase().includes(i))}return t.sort((e,t)=>e.code.localeCompare(t.code))}async findById(e){return this.frameworks.get(e)||null}async findByCode(e){return Array.from(this.frameworks.values()).find(t=>t.code===e)||null}async create(e){let t={id:`fw-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...e,createdAt:new Date,updatedAt:new Date};return this.frameworks.set(t.id,t),t}async update(e){let t=this.frameworks.get(e.id);if(!t)throw Error(`Framework not found: ${e.id}`);let i={...t,...e,updatedAt:new Date};return this.frameworks.set(i.id,i),i}async delete(e,t){if(!this.frameworks.get(e))throw Error(`Framework not found: ${e}`);await this.update({id:e,status:"ARCHIVED"})}async hardDelete(e){this.frameworks.delete(e)}async createVersion(e){let t,i=await this.findById(e.frameworkId);if(!i)throw Error(`Framework not found: ${e.frameworkId}`);let[a,r,n]=i.version.split(".").map(Number);switch(e.bumpType){case"major":t=`${a+1}.0.0`;break;case"minor":t=`${a}.${r+1}.0`;break;case"patch":t=`${a}.${r}.${n+1}`}let s={...i,...e.changes,id:`fw-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,version:t,status:"DRAFT",createdAt:new Date,updatedAt:new Date,createdBy:e.createdBy};return this.frameworks.set(s.id,s),i.status="SUPERSEDED",this.frameworks.set(i.id,i),s}async findVersions(e){let t=await this.findById(e);return t?Array.from(this.frameworks.values()).filter(e=>e.code===t.code).sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()):[]}async findLatestVersion(e){return Array.from(this.frameworks.values()).filter(t=>t.code===e&&"SUPERSEDED"!==t.status).sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime())[0]||null}async getApplicableFrameworks(e){let t=await this.findAll({tenantId:e.tenantId,applicableTo:e.planType,status:"ACTIVE"});return(e.includeOptional?t:t.filter(e=>e.isMandatory)).map(e=>({frameworkCode:e.code,title:e.title,category:e.category,mandatoryCompliance:e.isMandatory,relevantSections:[],content:e.content,version:e.version}))}async findByPlanType(e,t){return this.findAll({tenantId:t,applicableTo:e,status:"ACTIVE"})}async findMandatory(e){return this.findAll({tenantId:e,isMandatory:!0,status:"ACTIVE"})}async findGlobal(){return this.findAll({isGlobal:!0,status:"ACTIVE"})}async importFromFiles(e){return[]}async exportAsMarkdown(e){let t=await this.findById(e);if(!t)throw Error(`Framework not found: ${e}`);return t.content}async bulkImport(e){let t=[];for(let i of e){let e=await this.create(i);t.push(e)}return t}async search(e,t){return this.findAll({tenantId:t,search:e})}async findByCategory(e,t){return this.findAll({tenantId:t,category:e})}async countByCategory(e){let t=await this.findAll({tenantId:e}),i={};for(let e of t)i[e.category]=(i[e.category]||0)+1;return i}async countByStatus(e){let t=await this.findAll({tenantId:e}),i={};for(let e of t)i[e.status]=(i[e.status]||0)+1;return i}async validatePlanCompliance(e){return[]}}e.s(["SyntheticGovernanceFrameworkProvider",()=>a])},47604,e=>{"use strict";async function t(e){let t=await e.arrayBuffer();return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}class i{files=new Map;async uploadFile(e,i,a){let r=Buffer.from(await e.arrayBuffer()),n=await t(e),s=`${i}/${a}`;return this.files.set(s,{buffer:r,contentType:e.type||"application/octet-stream",checksum:n}),{path:s,checksum:n,size:r.length}}async downloadFile(e){let t=this.files.get(e);if(!t)throw Error(`File not found: ${e}`);return t.buffer}async getFileUrl(e){let t=this.files.get(e);if(!t)throw Error(`File not found: ${e}`);return t.buffer.length<1e6?`data:${t.contentType};base64,${t.buffer.toString("base64")}`:e}async deleteFile(e){this.files.delete(e)}async fileExists(e){return this.files.has(e)}async getFileMetadata(e){let t=this.files.get(e);if(!t)throw Error(`File not found: ${e}`);return{size:t.buffer.length,contentType:t.contentType}}async copyFile(e,t){let i=this.files.get(e);if(!i)throw Error(`Source file not found: ${e}`);return this.files.set(t,{...i,buffer:Buffer.from(i.buffer)}),{path:t,checksum:i.checksum}}}e.s(["SyntheticFileStorageProvider",()=>i],47604)},81605,32750,e=>{"use strict";var t=e.i(18352);class i{config;constructor(e){this.config=e||(0,t.loadBindingConfig)()}getPolicy(){let t=this.config.providers.policy;switch(t){case"synthetic":let{SyntheticPolicyProvider:i}=e.r(72340);return new i;case"mapped":throw Error("Mapped policy provider not implemented yet");case"live":let{LivePolicyProvider:a}=e.r(96366);return new a;default:throw Error(`Unknown binding mode for policy: ${t}`)}}getTerritory(){let t=this.config.providers.territory;switch(t){case"synthetic":let{SyntheticTerritoryProvider:i}=e.r(59961);return new i;case"mapped":throw Error("Mapped territory provider not implemented yet");case"live":throw Error("Live territory provider not implemented yet");default:throw Error(`Unknown binding mode for territory: ${t}`)}}getApproval(){let t=this.config.providers.approval;switch(t){case"synthetic":let{SyntheticApprovalProvider:i}=e.r(91631);return new i;case"mapped":throw Error("Mapped approval provider not implemented yet");case"live":throw Error("Live approval provider not implemented yet");default:throw Error(`Unknown binding mode for approval: ${t}`)}}getAudit(){let t=this.config.providers.audit;switch(t){case"synthetic":let{SyntheticAuditProvider:i}=e.r(47188);return new i;case"mapped":throw Error("Mapped audit provider not implemented yet");case"live":throw Error("Live audit provider not implemented yet");default:throw Error(`Unknown binding mode for audit: ${t}`)}}getLink(){let t=this.config.providers.link;switch(t){case"synthetic":let{SyntheticLinkProvider:i}=e.r(88870);return new i;case"mapped":throw Error("Mapped link provider not implemented yet");case"live":throw Error("Live link provider not implemented yet");default:throw Error(`Unknown binding mode for link: ${t}`)}}getSearch(){let t=this.config.providers.search;switch(t){case"synthetic":let{SyntheticSearchProvider:i}=e.r(2977);return new i;case"mapped":throw Error("Mapped search provider not implemented yet");case"live":throw Error("Live search provider not implemented yet");default:throw Error(`Unknown binding mode for search: ${t}`)}}getDocument(){let t=this.config.providers.document||"synthetic";switch(t){case"synthetic":let{SyntheticDocumentProvider:i}=e.r(28773);return new i;case"mapped":throw Error("Mapped document provider not implemented yet");case"live":throw Error("Live document provider not implemented yet");default:throw Error(`Unknown binding mode for document: ${t}`)}}getCommittee(){let t=this.config.providers.committee||"synthetic";switch(t){case"synthetic":let{SyntheticCommitteeProvider:i}=e.r(62105);return new i;case"mapped":throw Error("Mapped committee provider not implemented yet");case"live":throw Error("Live committee provider not implemented yet");default:throw Error(`Unknown binding mode for committee: ${t}`)}}getPlanTemplate(){let t=this.config.providers.planTemplate||"synthetic";switch(t){case"synthetic":let{SyntheticPlanTemplateProvider:i}=e.r(51554);return new i;case"mapped":throw Error("Mapped plan template provider not implemented yet");case"live":throw Error("Live plan template provider not implemented yet");default:throw Error(`Unknown binding mode for plan template: ${t}`)}}getPlan(){let t=this.config.providers.plan||"synthetic";switch(t){case"synthetic":let{SyntheticPlanProvider:i}=e.r(16229);return new i;case"mapped":throw Error("Mapped plan provider not implemented yet");case"live":throw Error("Live plan provider not implemented yet");default:throw Error(`Unknown binding mode for plan: ${t}`)}}getGovernanceFramework(){let t=this.config.providers.governanceFramework||"synthetic";switch(t){case"synthetic":let{SyntheticGovernanceFrameworkProvider:i}=e.r(52177);return new i;case"mapped":throw Error("Mapped governance framework provider not implemented yet");case"live":throw Error("Live governance framework provider not implemented yet");default:throw Error(`Unknown binding mode for governance framework: ${t}`)}}getFileStorage(){let{SyntheticFileStorageProvider:t}=e.r(47604);return new t}getConfig(){return this.config}getDiagnostics(){let e=process.env.DATABASE_URL||"",t=e.includes("schema=sgm_summit_demo"),i=Object.values(this.config.providers).some(e=>"live"===e);return{providers:this.config.providers,modes:{policy:this.config.providers.policy,territory:this.config.providers.territory,approval:this.config.providers.approval,audit:this.config.providers.audit,link:this.config.providers.link,search:this.config.providers.search,document:this.config.providers.document||"synthetic",committee:this.config.providers.committee||"synthetic",planTemplate:this.config.providers.planTemplate||"synthetic",plan:this.config.providers.plan||"synthetic",governanceFramework:this.config.providers.governanceFramework||"synthetic"},hasExternalDependencies:Object.values(this.config.providers).some(e=>"synthetic"!==e),database:{hasUrl:!!e,hasSchemaParam:t,schemaTarget:t?"sgm_summit_demo":"MISSING/INVALID",isLiveMode:i}}}}let a=null;function r(){return a||(a=new i),a}e.s(["getRegistry",()=>r],32750),e.s([],81605)}];

//# sourceMappingURL=lib_2f92e816._.js.map
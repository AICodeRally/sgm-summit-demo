module.exports=[15112,e=>{"use strict";var t=e.i(47909),a=e.i(74017),n=e.i(96250),o=e.i(59756),s=e.i(61916),r=e.i(74677),i=e.i(69741),l=e.i(16795),c=e.i(87718),d=e.i(95169),p=e.i(47587),m=e.i(66012),u=e.i(70101),g=e.i(74838),h=e.i(10372),v=e.i(93695);e.i(52474);var C=e.i(220),f=e.i(89171),R=e.i(69115),E=e.i(51283),S=e.i(79153),w=e.i(58042);let A=[{id:"committee-sgcc",code:"SGCC",name:"Sales Compensation Governance Committee",description:"Establishes and oversees the governance framework for all sales compensation programs",purpose:"Responsible for establishing, maintaining, and improving the sales compensation governance framework. Ensures all compensation plans, policies, and procedures are fair, compliant, transparent, and aligned with business strategy.",authority:["Approve new compensation plans and significant plan changes","Approve all compensation policies and procedures","Establish approval thresholds for exceptions and SPIFs","Review and resolve compensation disputes requiring escalation","Recommend plan changes to executive leadership","Establish governance standards and best practices"],members:[{id:"member-sgcc-001",name:"Sarah Chen",role:"Chair",title:"VP Sales Compensation",email:"sarah.chen@sparcc.demo",department:"Sales Operations",isVoting:!0,joinedDate:"2025-01-01"},{id:"member-sgcc-002",name:"Michael Rodriguez",role:"Vice Chair",title:"Chief Financial Officer",email:"michael.rodriguez@sparcc.demo",department:"Finance",isVoting:!0,joinedDate:"2025-01-01"},{id:"member-sgcc-003",name:"Jennifer Williams",role:"Member",title:"Chief Human Resources Officer",email:"jennifer.williams@sparcc.demo",department:"Human Resources",isVoting:!0,joinedDate:"2025-01-01"},{id:"member-sgcc-004",name:"David Thompson",role:"Member",title:"General Counsel",email:"david.thompson@sparcc.demo",department:"Legal",isVoting:!0,joinedDate:"2025-01-01"},{id:"member-sgcc-005",name:"Robert Kim",role:"Member",title:"Chief Sales Officer",email:"robert.kim@sparcc.demo",department:"Sales",isVoting:!0,joinedDate:"2025-01-01"},{id:"member-sgcc-006",name:"Amanda Foster",role:"Member",title:"VP Sales Operations",email:"amanda.foster@sparcc.demo",department:"Sales Operations",isVoting:!0,joinedDate:"2025-01-01"},{id:"member-sgcc-007",name:"James Martinez",role:"Member",title:"Regional Sales Director (Rotating)",email:"james.martinez@sparcc.demo",department:"Sales",isVoting:!0,joinedDate:"2025-01-01"},{id:"member-sgcc-008",name:"Lisa Park",role:"Secretary (Non-Voting)",title:"Sales Compensation Manager",email:"lisa.park@sparcc.demo",department:"Sales Operations",isVoting:!1,joinedDate:"2025-01-01"},{id:"member-sgcc-009",name:"Kevin Nguyen",role:"Advisor (Non-Voting)",title:"Compensation Administrator",email:"kevin.nguyen@sparcc.demo",department:"Sales Operations",isVoting:!1,joinedDate:"2025-01-01"}],meetingCadence:"Quarterly (minimum), with additional meetings as needed",quorumRequirement:"5 of 7 voting members required for quorum",charterDocument:"GC-001",status:"ACTIVE",createdAt:"2025-01-01T00:00:00.000Z"},{id:"committee-crb",code:"CRB",name:"Compensation Review Board",description:"Reviews and approves windfall deals, large SPIFs, and high-value exceptions",purpose:"The Compensation Review Board reviews and approves large deals, SPIFs, and exceptions above certain thresholds. Provides rapid decision-making for windfall transactions and exceptional circumstances.",authority:["Windfall deal review (>$1M ARR, >$100K commission, >50% quarterly quota)","SPIF approvals ($50K-$250K range)","Exception requests >$25K","Individual dispute escalations","20 business day review SLA for windfall deals"],members:[{id:"member-crb-001",name:"Sarah Chen",role:"Chair",title:"VP Sales Compensation",email:"sarah.chen@sparcc.demo",department:"Sales Operations",isVoting:!0,joinedDate:"2025-01-01"},{id:"member-crb-002",name:"Patricia Garcia",role:"Member",title:"Director of Finance",email:"patricia.garcia@sparcc.demo",department:"Finance",isVoting:!0,joinedDate:"2025-01-01"},{id:"member-crb-003",name:"Amanda Foster",role:"Member",title:"VP Sales Operations",email:"amanda.foster@sparcc.demo",department:"Sales Operations",isVoting:!0,joinedDate:"2025-01-01"},{id:"member-crb-004",name:"David Thompson",role:"Advisor (Non-Voting)",title:"General Counsel",email:"david.thompson@sparcc.demo",department:"Legal",isVoting:!1,joinedDate:"2025-01-01"},{id:"member-crb-005",name:"Robert Kim",role:"Advisor (Non-Voting)",title:"Chief Sales Officer",email:"robert.kim@sparcc.demo",department:"Sales",isVoting:!1,joinedDate:"2025-01-01"}],meetingCadence:"Ad-hoc as needed for windfall deals and exception requests",quorumRequirement:"2 of 3 voting members required for quorum",charterDocument:"CRB-001",status:"ACTIVE",createdAt:"2025-01-01T00:00:00.000Z"}];function b(e){console.log("[SGM Telemetry]",JSON.stringify(e,null,2))}async function y(e){try{let t,a,n,o=await e.json(),s=o.tenantId||"platform",r=o.messages||[];if(!r.length)return f.NextResponse.json({error:"No messages provided"},{status:400});let i=E.APPROVAL_ITEMS.filter(e=>"PENDING"===e.status),l=S.ALL_GOVERNANCE_DOCUMENTS.filter(e=>"POLICY"===e.documentType&&"APPROVED"===e.status),c=w.CASE_ITEMS.filter(e=>"UNDER_REVIEW"===e.status||"PENDING_INFO"===e.status||"ESCALATED"===e.status),d=`Pending Approvals: ${i.length} documents awaiting review
Active Policies: ${l.length} approved governance policies
Active Cases: ${c.length} (${w.CASE_ITEMS.filter(e=>"DISPUTE"===e.type).length} disputes, ${w.CASE_ITEMS.filter(e=>"EXCEPTION"===e.type).length} exceptions)
Governance Committees: ${A.map(e=>e.name).join(", ")}
Total Documents: ${S.ALL_GOVERNANCE_DOCUMENTS.length}`,p=`You are AskSGM, a governance intelligence assistant for the Sales Governance Manager (SGM) SPARCC platform.

## Governance Context
- **Department**: ${o.department||"governance"}
- **Total Documents**: ${S.ALL_GOVERNANCE_DOCUMENTS.length}
- **Pending Approvals**: ${i.length}
- **Active Cases**: ${c.length}
- **Current Page**: ${o.context?.currentPage||"dashboard"}

## Retrieved Data (RAG)
${d}

## Your Role
You are an expert in sales compensation governance, helping users understand:
- **Policy & Compliance**: Explain compensation policies, approval workflows, regulatory requirements
- **Approvals & Workflows**: Track approval status, SLA compliance, committee decisions
- **Case Management**: Guide dispute resolution, exception requests, territory changes
- **Document Governance**: Search policies, procedures, templates, and frameworks
- **Compensation Plans**: Explain plan design, quota setting, commission calculations, windfall reviews

## Key Knowledge Areas
- **SGCC (Sales Governance Compensation Committee)**: Approves compensation plans, policy changes
- **CRB (Compensation Review Board)**: Reviews windfall deals >$1M with 6 decision options
- **Policy Types**: FRAMEWORK, POLICY, PROCEDURE, TEMPLATE, CHECKLIST, GUIDE
- **Approval SLAs**: Standard 10 business days, expedited 5 business days
- **Case Types**: DISPUTE, EXCEPTION, TERRITORY_CHANGE, POLICY_CLARIFICATION

## Instructions
1. Provide specific, governance-focused answers using the context above
2. When discussing policies, reference document codes (e.g., SCP-001, GC-001)
3. Explain approval workflows, SLA requirements, and escalation paths
4. Be proactive: suggest related policies or workflows
5. Keep responses concise but complete
6. Always acknowledge limitations: "I don't have real-time access to [specific data]"

## Example Responses
- Explain the SGCC approval process for new compensation plans
- Summarize SLA compliance and identify at-risk approvals
- Guide users through exception request procedures
- Explain CRB windfall decision options (Full Pay, Cap, Amortization, etc.)
- Identify relevant policies for specific compensation scenarios

Current conversation context provided by user. Respond helpfully and professionally with governance expertise.`,m=Date.now(),u=!1;if((0,R.isRallyLLMConfigured)()){let e=(0,R.getRallyLLMClient)(),o=e.getStatus();console.log(`ðŸ”§ [AskSGM] Using LLM: ${o.model} (Rally)`);let s=await e.chat(r.map(e=>({role:e.role,content:e.content})),{systemPrompt:p,maxTokens:1024,temperature:.6});t=s.content,a=o.model,n=s.tokensUsed,u=s.cached}else{console.log(`ðŸ”§ [AskSGM] Using LLM: Claude 3.5 Sonnet (Fallback)`);let e=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":process.env.ANTHROPIC_API_KEY||"","anthropic-version":"2023-06-01"},body:JSON.stringify({model:"claude-opus-4-5-20251101",max_tokens:1024,temperature:.6,system:p,messages:r.map(e=>({role:e.role,content:e.content}))})});if(!e.ok){let t=await e.text();throw Error(`Claude API error: ${e.status} - ${t}`)}let o=await e.json();t=o.content?.[0]?.text||"",a="claude-opus-4-5-20251101",n={input:o.usage?.input_tokens||0,output:o.usage?.output_tokens||0,total:(o.usage?.input_tokens||0)+(o.usage?.output_tokens||0)}}let g=Date.now(),h=t.length,v=g-m;return b({name:"ai.request",appId:"sgm-sparcc",tenantId:s,ts:new Date().toISOString(),metrics:{modelId:a,modelType:(0,R.isRallyLLMConfigured)()?"rally-llama-spm":"claude-sonnet",intent:"sgm_governance_qa",department:o.department||"governance",inputTokens:n.input}}),b({name:"ai.response",appId:"sgm-sparcc",tenantId:s,ts:new Date().toISOString(),metrics:{responseLength:h,responseTime:`${v}ms`,inputTokens:n.input,outputTokens:n.output,totalTokens:n.total,cached:u,success:!0}}),console.log("âœ… AskSGM interaction:",{model:a,department:o.department,messageCount:r.length,cached:u,tokens:n,responseTime:`${v}ms`,responseLength:h}),f.NextResponse.json({text:t,tokens:{input:n.input,output:n.output},timestamp:new Date().toISOString(),cached:u})}catch(t){console.error("AskSGM error:",t);let e=t instanceof Error?t.message:"Unknown error occurred";return b({name:"api.error",appId:"sgm-sparcc",tenantId:"platform",ts:new Date().toISOString(),metrics:{endpoint:"/api/ai/asksgm",errorClass:t instanceof Error?t.name:"UNKNOWN",statusCode:500}}),f.NextResponse.json({error:"Failed to process request",details:e},{status:500})}}e.s(["POST",()=>y],82200);var T=e.i(82200);let P=new t.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/ai/asksgm/route",pathname:"/api/ai/asksgm",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/ai/asksgm/route.ts",nextConfigOutput:"standalone",userland:T}),{workAsyncStorage:x,workUnitAsyncStorage:I,serverHooks:O}=P;function N(){return(0,n.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:I})}async function k(e,t,n){P.isDev&&(0,o.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let f="/api/ai/asksgm/route";f=f.replace(/\/index$/,"")||"/";let R=await P.prepare(e,t,{srcPage:f,multiZoneDraftMode:!1});if(!R)return t.statusCode=400,t.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve()),null;let{buildId:E,params:S,nextConfig:w,parsedUrl:A,isDraftMode:b,prerenderManifest:y,routerServerContext:T,isOnDemandRevalidate:x,revalidateOnlyGenerated:I,resolvedPathname:O,clientReferenceManifest:N,serverActionsManifest:k}=R,D=(0,i.normalizeAppPath)(f),M=!!(y.dynamicRoutes[D]||y.routes[O]),_=async()=>((null==T?void 0:T.render404)?await T.render404(e,t,A,!1):t.end("This page could not be found"),null);if(M&&!b){let e=!!y.routes[O],t=y.dynamicRoutes[D];if(t&&!1===t.fallback&&!e){if(w.experimental.adapterPath)return await _();throw new v.NoFallbackError}}let L=null;!M||P.isDev||b||(L="/index"===(L=O)?"/":L);let q=!0===P.isDev||!M,G=M&&!q;k&&N&&(0,r.setManifestsSingleton)({page:f,clientReferenceManifest:N,serverActionsManifest:k});let V=e.method||"GET",$=(0,s.getTracer)(),j=$.getActiveScopeSpan(),U={params:S,prerenderManifest:y,renderOpts:{experimental:{authInterrupts:!!w.experimental.authInterrupts},cacheComponents:!!w.cacheComponents,supportsDynamicResponse:q,incrementalCache:(0,o.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:w.cacheLife,waitUntil:n.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,a,n,o)=>P.onRequestError(e,t,n,o,T)},sharedContext:{buildId:E}},F=new l.NodeNextRequest(e),H=new l.NodeNextResponse(t),K=c.NextRequestAdapter.fromNodeNextRequest(F,(0,c.signalFromNodeResponse)(t));try{let r=async e=>P.handle(K,U).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=$.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=a.get("next.route");if(n){let t=`${V} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${V} ${f}`)}),i=!!(0,o.getRequestMeta)(e,"minimalMode"),l=async o=>{var s,l;let c=async({previousCacheEntry:a})=>{try{if(!i&&x&&I&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await r(o);e.fetchMetrics=U.renderOpts.fetchMetrics;let l=U.renderOpts.pendingWaitUntil;l&&n.waitUntil&&(n.waitUntil(l),l=void 0);let c=U.renderOpts.collectedTags;if(!M)return await (0,m.sendResponse)(F,H,s,U.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,u.toNodeOutgoingHttpHeaders)(s.headers);c&&(t[h.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let a=void 0!==U.renderOpts.collectedRevalidate&&!(U.renderOpts.collectedRevalidate>=h.INFINITE_CACHE)&&U.renderOpts.collectedRevalidate,n=void 0===U.renderOpts.collectedExpire||U.renderOpts.collectedExpire>=h.INFINITE_CACHE?void 0:U.renderOpts.collectedExpire;return{value:{kind:C.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:a,expire:n}}}}catch(t){throw(null==a?void 0:a.isStale)&&await P.onRequestError(e,t,{routerKind:"App Router",routePath:f,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:G,isOnDemandRevalidate:x})},!1,T),t}},d=await P.handleResponse({req:e,nextConfig:w,cacheKey:L,routeKind:a.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:y,isRoutePPREnabled:!1,isOnDemandRevalidate:x,revalidateOnlyGenerated:I,responseGenerator:c,waitUntil:n.waitUntil,isMinimalMode:i});if(!M)return null;if((null==d||null==(s=d.value)?void 0:s.kind)!==C.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(l=d.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",x?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),b&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let v=(0,u.fromNodeOutgoingHttpHeaders)(d.value.headers);return i&&M||v.delete(h.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||v.get("Cache-Control")||v.set("Cache-Control",(0,g.getCacheControlHeader)(d.cacheControl)),await (0,m.sendResponse)(F,H,new Response(d.value.body,{headers:v,status:d.value.status||200})),null};j?await l(j):await $.withPropagatedContext(e.headers,()=>$.trace(d.BaseServerSpan.handleRequest,{spanName:`${V} ${f}`,kind:s.SpanKind.SERVER,attributes:{"http.method":V,"http.target":e.url}},l))}catch(t){if(t instanceof v.NoFallbackError||await P.onRequestError(e,t,{routerKind:"App Router",routePath:D,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:G,isOnDemandRevalidate:x})},!1,T),M)throw t;return await (0,m.sendResponse)(F,H,new Response(null,{status:500})),null}}e.s(["handler",()=>k,"patchFetch",()=>N,"routeModule",()=>P,"serverHooks",()=>O,"workAsyncStorage",()=>x,"workUnitAsyncStorage",()=>I],15112)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_app-route_b00c1ce0.js.map
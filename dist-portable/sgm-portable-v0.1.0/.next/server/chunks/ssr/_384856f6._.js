module.exports=[38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},42894,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246);let f={md:["text/markdown","text/plain","application/x-markdown"],docx:["application/vnd.openxmlformats-officedocument.wordprocessingml.document"],pdf:["application/pdf"],xlsx:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],pptx:["application/vnd.openxmlformats-officedocument.presentationml.presentation"]},g={md:[".md",".markdown"],docx:[".docx"],pdf:[".pdf"],xlsx:[".xlsx"],pptx:[".pptx"]};function h({onUpload:a,onClose:d}){let[e,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),o=(0,c.useRef)(null),[p,q]=(0,c.useState)({documentCode:"",title:"",documentType:"POLICY"}),r=(0,c.useCallback)(a=>{a.preventDefault(),a.stopPropagation(),h(!0)},[]),s=(0,c.useCallback)(a=>{a.preventDefault(),a.stopPropagation(),h(!1)},[]),t=(0,c.useCallback)(a=>{a.preventDefault(),a.stopPropagation()},[]),u=(0,c.useCallback)(a=>{if(!a)return;h(!1),n(null);let b=[],c=[];for(let d=0;d<a.length;d++){let e=a[d],h=function(a){let b=a.toLowerCase().substring(a.lastIndexOf(".")).toLowerCase();for(let[a,c]of Object.entries(g))if(c.includes(b))return a;return null}(e.name);if(!h){c.push(`${e.name}: Unsupported file type`);continue}let i=function(a,b){let c=[];return a?(!function(a,b){if(!f[b].includes(a.type))return!1;let c=a.name.toLowerCase();return g[b].some(a=>c.endsWith(a))}(a,b)&&c.push(`Invalid file type. Expected ${b} file.`),!function(a,b=0x3200000){return a.size>0&&a.size<=b}(a)&&c.push("File size exceeds maximum limit of 50MB."),{valid:0===c.length,errors:c}):(c.push("No file provided"),{valid:!1,errors:c})}(e,h);if(!i.valid){c.push(`${e.name}: ${i.errors.join(", ")}`);continue}b.push(e)}c.length>0&&n(c.join("\n")),j(a=>[...a,...b])},[]),v=(0,c.useCallback)(a=>{a.preventDefault(),a.stopPropagation(),u(a.dataTransfer.files)},[u]),w=(0,c.useCallback)(a=>{u(a.target.files)},[u]),x=async b=>{if(b.preventDefault(),0===i.length)return void n("Please select at least one file");if(!p.documentCode||!p.title)return void n("Please fill in all required fields");l(!0);try{await a(i,p),j([]),q({documentCode:"",title:"",documentType:"POLICY"}),d?.()}catch(a){n(a instanceof Error?a.message:"Upload failed")}finally{l(!1)}};return(0,b.jsx)("div",{className:"w-full max-w-2xl mx-auto",children:(0,b.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[m&&(0,b.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,b.jsx)("p",{className:"text-red-700 text-sm",children:m})}),(0,b.jsxs)("div",{onDragEnter:r,onDragLeave:s,onDragOver:t,onDrop:v,className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ${e?"border-blue-500 bg-blue-50":"border-gray-300 bg-gray-50 hover:border-gray-400"}`,onClick:()=>o.current?.click(),children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"text-4xl",children:"ðŸ“¤"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Drop files here or click to select"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Supported formats: .md, .docx, .pdf, .xlsx, .pptx (Max 50MB each)"})]}),(0,b.jsx)("input",{ref:o,type:"file",multiple:!0,onChange:w,accept:".md,.docx,.pdf,.xlsx,.pptx",className:"hidden"})]}),i.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900",children:["Selected Files (",i.length,")"]}),(0,b.jsx)("div",{className:"space-y-2",children:i.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,b.jsx)("span",{className:"text-lg",children:"ðŸ“„"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[(a.size/1024/1024).toFixed(2)," MB"]})]})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{j(a=>a.filter((a,b)=>b!==c))},className:"ml-2 text-gray-400 hover:text-red-500",children:"âœ•"})]},c))})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Document Details"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"documentCode",className:"block text-sm text-gray-700 mb-1",children:"Document Code *"}),(0,b.jsx)("input",{id:"documentCode",type:"text",placeholder:"e.g., POL-001",value:p.documentCode,onChange:a=>q(b=>({...b,documentCode:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"title",className:"block text-sm text-gray-700 mb-1",children:"Title *"}),(0,b.jsx)("input",{id:"title",type:"text",placeholder:"e.g., Sales Crediting Policy",value:p.title,onChange:a=>q(b=>({...b,title:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"documentType",className:"block text-sm text-gray-700 mb-1",children:"Document Type"}),(0,b.jsxs)("select",{id:"documentType",value:p.documentType,onChange:a=>q(b=>({...b,documentType:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[(0,b.jsx)("option",{value:"FRAMEWORK",children:"Framework"}),(0,b.jsx)("option",{value:"POLICY",children:"Policy"}),(0,b.jsx)("option",{value:"PROCEDURE",children:"Procedure"}),(0,b.jsx)("option",{value:"TEMPLATE",children:"Template"}),(0,b.jsx)("option",{value:"CHECKLIST",children:"Checklist"}),(0,b.jsx)("option",{value:"GUIDE",children:"Guide"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"submit",disabled:k||0===i.length,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 text-sm font-medium",children:k?"Uploading...":`Upload ${i.length} File${1!==i.length?"s":""}`}),d&&(0,b.jsx)("button",{type:"button",onClick:d,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 text-sm font-medium",children:"Cancel"})]})]})})}function i(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)(!1),i=async(b,c)=>{g(!0);try{for(let a of b)if(new FormData().append("file",a),!(await fetch("/api/sgm/documents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({documentCode:c.documentCode,title:c.title||a.name,documentType:c.documentType,description:`Uploaded: ${a.name}`,fileType:a.name.split(".").pop()?.toLowerCase()||"md",status:"DRAFT",version:"1.0.0",createdBy:"system",owner:"Demo User",tenantId:"demo-tenant-001"})})).ok)throw Error(`Failed to upload ${a.name}`);a.push("/documents")}finally{g(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-6",children:[(0,b.jsx)(e.default,{href:"/documents",className:"text-blue-600 hover:text-blue-700 text-sm mb-4 inline-block",children:"â† Back to Documents"}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Upload Documents"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Upload one or more governance documents"})]})}),(0,b.jsx)("div",{className:"max-w-4xl mx-auto px-6 py-12",children:f?(0,b.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-8 text-center",children:(0,b.jsx)("p",{className:"text-gray-600",children:"Uploading documents..."})}):(0,b.jsx)(h,{onUpload:i,onClose:()=>a.push("/documents")})})]})}a.s(["default",()=>i],42894)}];

//# sourceMappingURL=_384856f6._.js.map